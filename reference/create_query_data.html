<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Creates a queries dataset as input dataset to the dataset_queries argument in derive_vars_query() â€” create_query_data â€¢ admiral</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates a queries dataset as input dataset to the dataset_queries argument in derive_vars_query() â€” create_query_data"><meta name="description" content="Creates a queries dataset as input dataset to the dataset_queries argument
in the derive_vars_query() function as defined in the Queries Dataset Documentation."><meta property="og:description" content="Creates a queries dataset as input dataset to the dataset_queries argument
in the derive_vars_query() function as defined in the Queries Dataset Documentation."><meta property="og:image" content="https://pharmaverse.github.io/admiral/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">admiral</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-get-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Get Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-get-started"><li><a class="dropdown-item" href="../articles/admiral.html">Get Started</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/pharmaverse/admiral/blob/main/inst/cheatsheet/admiral_cheatsheet.pdf">Cheatsheet</a></li>
    <li><a class="dropdown-item" href="https://pharmaverse.github.io/admiraldiscovery/articles/presentation_archive.html">Presentation Archive</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-user-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">User Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-user-guides"><li><h6 class="dropdown-header" data-toc-skip>General Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/concepts_conventions.html">Programming Concepts and Conventions</a></li>
    <li><a class="dropdown-item" href="../articles/generic.html">Generic Derivations</a></li>
    <li><a class="dropdown-item" href="../articles/higher_order.html">Higher Order Functions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>ADaM Script Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/adsl.html">Creating a Basic ADSL</a></li>
    <li><a class="dropdown-item" href="../articles/occds.html">Creating an OCCDS ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_finding.html">Creating a BDS Findings ADAM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_exposure.html">Creating a BDS Exposure ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_tte.html">Creating a BDS Time-to-Event ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/questionnaires.html">Creating Questionnaire ADaMs</a></li>
    <li><a class="dropdown-item" href="../articles/pk_adnca.html">Creating a PK NCA or Population PK ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/hys_law.html">Hy's Law Implementation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Special Topics Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/imputation.html">Date and Time Imputation</a></li>
    <li><a class="dropdown-item" href="../articles/visits_periods.html">Visit and Period Variables</a></li>
    <li><a class="dropdown-item" href="../articles/queries_dataset.html">Queries Dataset Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/lab_grading.html">Lab Grading</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="https://pharmaverse.github.io/admiraldiscovery/articles/reactable.html">ðŸ”Ž Find my function</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://pharmaverse.slack.com/" aria-label="Slack"><span class="fa fa-slack"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/website-versions.html" aria-label="Previous Release Websites"><span class="fa fa-history"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/issues/new/choose" aria-label="New Issue"><span class="fa fa-bug"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Creates a queries dataset as input dataset to the <code>dataset_queries</code> argument in <code>derive_vars_query()</code></h1>
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiral/blob/main/R/create_query_data.R" class="external-link"><code>R/create_query_data.R</code></a></small>
      <div class="d-none name"><code>create_query_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a queries dataset as input dataset to the <code>dataset_queries</code> argument
in the <code><a href="derive_vars_query.html">derive_vars_query()</a></code> function as defined in the <a href="../articles/queries_dataset.html">Queries Dataset Documentation</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_query_data</span><span class="op">(</span><span class="va">queries</span>, version <span class="op">=</span> <span class="cn">NULL</span>, get_terms_fun <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-queries">queries<a class="anchor" aria-label="anchor" href="#arg-queries"></a></dt>
<dd><p>List of queries</p>
<p>A list of <code><a href="query.html">query()</a></code> objects is expected.</p></dd>


<dt id="arg-version">version<a class="anchor" aria-label="anchor" href="#arg-version"></a></dt>
<dd><p>Dictionary version</p>
<p>The dictionary version used for coding the terms should be specified.
If any of the queries is a basket (SMQ, SDG, ....) or a customized query
including a basket, the parameter needs to be specified.</p>
<p><em>Permitted Values</em>: A character string (the expected format is
company-specific)</p></dd>


<dt id="arg-get-terms-fun">get_terms_fun<a class="anchor" aria-label="anchor" href="#arg-get-terms-fun"></a></dt>
<dd><p>Function which returns the terms</p>
<p>For each query specified for the <code>queries</code> parameter referring to a basket
(i.e., those where the <code>definition</code> field is set to a <code><a href="basket_select.html">basket_select()</a></code>
object or a list which contains at least one <code><a href="basket_select.html">basket_select()</a></code> object) the
specified function is called to retrieve the terms defining the query.
This function is not provided by admiral as it is company specific, i.e.,
it has to be implemented at company level.</p>
<p>The function must return a dataset with all the terms defining the basket.
The output dataset must contain the following variables.</p><ul><li><p><code>SRCVAR</code>: the variable to be used for defining a term of the basket,
e.g., <code>AEDECOD</code></p></li>
<li><p><code>TERMCHAR</code>: the name of the term if the variable <code>SRCVAR</code> is
referring to is character</p></li>
<li><p><code>TERMNUM</code> the numeric id of the term if the variable <code>SRCVAR</code> is
referring to is numeric</p></li>
<li><p><code>GRPNAME</code>: the name of the basket. The values must be the same for
all observations.</p></li>
</ul><p>The function must provide the following parameters</p><ul><li><p><code>basket_select</code>: A <code><a href="basket_select.html">basket_select()</a></code> object.</p></li>
<li><p><code>version</code>: The dictionary version. The value specified for the
<code>version</code> in the <code>create_query_data()</code> call is passed to this
parameter.</p></li>
<li><p><code>keep_id</code>: If set to <code>TRUE</code>, the output dataset must contain the
<code>GRPID</code> variable. The variable must be set to the numeric id of the basket.</p></li>
<li><p><code>temp_env</code>: A temporary environment is passed to this parameter. It can
be used to store data which is used for all baskets in the
<code>create_query_data()</code> call. For example if SMQs need to be read from a
database all SMQs can be read and stored in the environment when the first
SMQ is handled. For the other SMQs the terms can be retrieved from the
environment instead of accessing the database again.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataset to be used as input dataset to the <code>dataset_queries</code>
argument in <code><a href="derive_vars_query.html">derive_vars_query()</a></code></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For each <code><a href="query.html">query()</a></code> object listed in the <code>queries</code> argument, the terms belonging
to the query (<code>SRCVAR</code>, <code>TERMCHAR</code>, <code>TERMNUM</code>) are determined with respect
to the <code>definition</code> field of the query: if the definition field of the
<code><a href="query.html">query()</a></code> object is</p><ul><li><p>a <code><a href="basket_select.html">basket_select()</a></code> object, the terms are read from the basket
database by calling the function specified for the <code>get_terms_fun</code> parameter.</p></li>
<li><p>a data frame, the terms stored in the data frame are used.</p></li>
<li><p>a list of data frames and <code><a href="basket_select.html">basket_select()</a></code> objects, all terms from
the data frames and all terms read from the basket database referenced by the
<code><a href="basket_select.html">basket_select()</a></code> objects are collated.</p></li>
</ul><p>The following variables (as described in <a href="../articles/queries_dataset.html">Queries Dataset Documentation</a>) are created:</p><ul><li><p><code>PREFIX</code>: Prefix of the variables to be created by
<code><a href="derive_vars_query.html">derive_vars_query()</a></code> as specified by the <code>prefix</code> element.</p></li>
<li><p><code>GRPNAME</code>: Name of the query as specified by the <code>name</code> element.</p></li>
<li><p><code>GRPID</code>: Id of the query as specified by the <code>id</code> element. If the <code>id</code>
element is not specified for a query, the variable is set to <code>NA</code>. If the
<code>id</code> element is not specified for any query, the variable is not created.</p></li>
<li><p><code>SCOPE</code>: scope of the query as specified by the <code>scope</code> element of
the <code><a href="basket_select.html">basket_select()</a></code> object. For queries not defined by a <code><a href="basket_select.html">basket_select()</a></code>
object, the variable is set to <code>NA</code>. If none of the queries is defined by a
<code><a href="basket_select.html">basket_select()</a></code> object, the variable is not created.</p></li>
<li><p><code>SCOPEN</code>: numeric scope of the query. It is set to <code>1</code> if the
scope is broad. Otherwise it is set to <code>2</code>. If the <code>add_scope_num</code> element
equals <code>FALSE</code>, the variable is set to <code>NA</code>. If the <code>add_scope_num</code> element
equals <code>FALSE</code> for all baskets or none of the queries is an basket , the variable
is not created.</p></li>
<li><p><code>SRCVAR</code>: Name of the variable used to identify the terms.</p></li>
<li><p><code>TERMCHAR</code>: Value of the term variable if it is a character variable.</p></li>
<li><p><code>TERMNUM</code>: Value of the term variable if it is a numeric variable.</p></li>
<li><p><code>VERSION</code>: Set to the value of the <code>version</code> argument. If it is not
specified, the variable is not created.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="derive_vars_query.html">derive_vars_query()</a></code>, <code><a href="query.html">query()</a></code>, <code><a href="basket_select.html">basket_select()</a></code>, <a href="../articles/queries_dataset.html">Queries Dataset Documentation</a></p>
<p>Creating auxiliary datasets:
<code><a href="consolidate_metadata.html">consolidate_metadata</a>()</code>,
<code><a href="create_period_dataset.html">create_period_dataset</a>()</code>,
<code><a href="create_single_dose_dataset.html">create_single_dose_dataset</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/pharmaversesdtm/" class="external-link">pharmaversesdtm</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/admiral/">admiral</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># creating a query dataset for a customized query</span></span></span>
<span class="r-in"><span><span class="va">cqterms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">TERMCHAR</span>, <span class="op">~</span><span class="va">TERMNUM</span>,</span></span>
<span class="r-in"><span>  <span class="st">"APPLICATION SITE ERYTHEMA"</span>, <span class="fl">10003041L</span>,</span></span>
<span class="r-in"><span>  <span class="st">"APPLICATION SITE PRURITUS"</span>, <span class="fl">10003053L</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>SRCVAR <span class="op">=</span> <span class="st">"AEDECOD"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cq</span> <span class="op">&lt;-</span> <span class="fu"><a href="query.html">query</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  prefix <span class="op">=</span> <span class="st">"CQ01"</span>,</span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Application Site Issues"</span>,</span></span>
<span class="r-in"><span>  definition <span class="op">=</span> <span class="va">cqterms</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">create_query_data</span><span class="op">(</span>queries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">cq</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 Ã— 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TERMCHAR                   TERMNUM SRCVAR  PREFIX GRPNAME                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> APPLICATION SITE ERYTHEMA 10<span style="text-decoration: underline;">003</span>041 AEDECOD CQ01   Application Site Issues</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> APPLICATION SITE PRURITUS 10<span style="text-decoration: underline;">003</span>053 AEDECOD CQ01   Application Site Issues</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create a query dataset for SMQs</span></span></span>
<span class="r-in"><span><span class="va">pregsmq</span> <span class="op">&lt;-</span> <span class="fu"><a href="query.html">query</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  prefix <span class="op">=</span> <span class="st">"SMQ02"</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="va">auto</span>,</span></span>
<span class="r-in"><span>  definition <span class="op">=</span> <span class="fu"><a href="basket_select.html">basket_select</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    name <span class="op">=</span> <span class="st">"Pregnancy and neonatal topics (SMQ)"</span>,</span></span>
<span class="r-in"><span>    scope <span class="op">=</span> <span class="st">"NARROW"</span>,</span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="st">"smq"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bilismq</span> <span class="op">&lt;-</span> <span class="fu"><a href="query.html">query</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  prefix <span class="op">=</span> <span class="st">"SMQ04"</span>,</span></span>
<span class="r-in"><span>  definition <span class="op">=</span> <span class="fu"><a href="basket_select.html">basket_select</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="fl">20000121L</span>,</span></span>
<span class="r-in"><span>    scope <span class="op">=</span> <span class="st">"BROAD"</span>,</span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="st">"smq"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The get_terms function from pharmaversesdtm is used for this example.</span></span></span>
<span class="r-in"><span><span class="co"># In a real application a company-specific function must be used.</span></span></span>
<span class="r-in"><span><span class="fu">create_query_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  queries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">pregsmq</span>, <span class="va">bilismq</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  get_terms_fun <span class="op">=</span> <span class="fu">pharmaversesdtm</span><span class="fu">:::</span><span class="va"><a href="https://pharmaverse.github.io/pharmaversesdtm/reference/get_terms.html" class="external-link">get_terms</a></span>,</span></span>
<span class="r-in"><span>  version <span class="op">=</span> <span class="st">"20.1"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 43 Ã— 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    TERMCHAR                           SRCVAR GRPNAME  GRPID SCOPE PREFIX VERSION</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Achromotrichia congenital          AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Craniosynostosis                   AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Hypophosphatasia                   AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Congenital pyelocaliectasis        AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Uterine contractions during pregnâ€¦ AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Ductus arteriosus premature closuâ€¦ AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Pseudotruncus arteriosus           AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Lipomeningocele                    AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Macrocephaly                       AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Carnitine palmitoyltransferase deâ€¦ AEDECâ€¦ Pregnaâ€¦ 2.00<span style="color: #949494;">e</span>7 NARRâ€¦ SMQ02  20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># â„¹ 33 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create a query dataset for SDGs</span></span></span>
<span class="r-in"><span><span class="va">sdg</span> <span class="op">&lt;-</span> <span class="fu"><a href="query.html">query</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  prefix <span class="op">=</span> <span class="st">"SDG01"</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="va">auto</span>,</span></span>
<span class="r-in"><span>  definition <span class="op">=</span> <span class="fu"><a href="basket_select.html">basket_select</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    name <span class="op">=</span> <span class="st">"5-aminosalicylates for ulcerative colitis"</span>,</span></span>
<span class="r-in"><span>    scope <span class="op">=</span> <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="st">"sdg"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The get_terms function from pharmaversesdtm is used for this example.</span></span></span>
<span class="r-in"><span><span class="co"># In a real application a company-specific function must be used.</span></span></span>
<span class="r-in"><span><span class="fu">create_query_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  queries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">sdg</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  get_terms_fun <span class="op">=</span> <span class="fu">pharmaversesdtm</span><span class="fu">:::</span><span class="va"><a href="https://pharmaverse.github.io/pharmaversesdtm/reference/get_terms.html" class="external-link">get_terms</a></span>,</span></span>
<span class="r-in"><span>  version <span class="op">=</span> <span class="st">"2019-09"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 16 Ã— 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    TERMCHAR                            SRCVAR GRPNAME GRPID SCOPE PREFIX VERSION</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> AMINOSALICYLIC ACID                 CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> AMINOSALICYLATE CALCIUM             CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> AMINOSALICYLATE CALCIUM ALUMINIUM   CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> AMINOSALICYLATE SODIUM              CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> SODIUM AMINOSALICYLATE DIHYDRATE    CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> AMINOSALICYLATE SODIUM;AMINOSALICYâ€¦ CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> SULFASALAZINE                       CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> CALCIUM BENZAMIDOSALICYLATE         CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> OLSALAZINE                          CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> OLSALAZINE SODIUM                   CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> MESALAZINE                          CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> BALSALAZIDE                         CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> BALSALAZIDE SODIUM                  CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> BALSALAZIDE DISODIUM DIHYDRATE      CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> DERSALAZINE                         CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> DERSALAZINE SODIUM                  CMDECâ€¦ 5-aminâ€¦   220 <span style="color: #BB0000;">NA</span>    SDG01  2019-09</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># creating a query dataset for a customized query including SMQs</span></span></span>
<span class="r-in"><span><span class="co"># The get_terms function from pharmaversesdtm is used for this example.</span></span></span>
<span class="r-in"><span><span class="co"># In a real application a company-specific function must be used.</span></span></span>
<span class="r-in"><span><span class="fu">create_query_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  queries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="query.html">query</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      prefix <span class="op">=</span> <span class="st">"CQ03"</span>,</span></span>
<span class="r-in"><span>      name <span class="op">=</span> <span class="st">"Special issues of interest"</span>,</span></span>
<span class="r-in"><span>      definition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="basket_select.html">basket_select</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>          name <span class="op">=</span> <span class="st">"Pregnancy and neonatal topics (SMQ)"</span>,</span></span>
<span class="r-in"><span>          scope <span class="op">=</span> <span class="st">"NARROW"</span>,</span></span>
<span class="r-in"><span>          type <span class="op">=</span> <span class="st">"smq"</span></span></span>
<span class="r-in"><span>        <span class="op">)</span>,</span></span>
<span class="r-in"><span>        <span class="va">cqterms</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  get_terms_fun <span class="op">=</span> <span class="fu">pharmaversesdtm</span><span class="fu">:::</span><span class="va"><a href="https://pharmaverse.github.io/pharmaversesdtm/reference/get_terms.html" class="external-link">get_terms</a></span>,</span></span>
<span class="r-in"><span>  version <span class="op">=</span> <span class="st">"20.1"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 23 Ã— 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    TERMCHAR                                SRCVAR GRPNAME TERMNUM PREFIX VERSION</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Achromotrichia congenital               AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Craniosynostosis                        AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Hypophosphatasia                        AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Congenital pyelocaliectasis             AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Uterine contractions during pregnancy   AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Ductus arteriosus premature closure     AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Pseudotruncus arteriosus                AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Lipomeningocele                         AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Macrocephaly                            AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Carnitine palmitoyltransferase deficieâ€¦ AEDECâ€¦ Speciaâ€¦      <span style="color: #BB0000;">NA</span> CQ03   20.1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># â„¹ 13 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ben Straub, Stefan Bundfuss, Jeffrey Dickinson, Ross Farrugia, Fanny Gautier, Dinakar Kulkarni, Edoardo Mancini, Sadchla Mascary, Gordon Miller, Jim Rothstein, Sophie Shapcott, Eric Simms, Daniel Sjoberg, Stefan Thoma, Phillip Webster, Zelos Zhu, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

