<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Derive death cause (DTHCAUS) and add traceability variables if required."><title>Derive Death Cause — derive_var_dthcaus • admiral</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Derive Death Cause — derive_var_dthcaus"><meta property="og:description" content="Derive death cause (DTHCAUS) and add traceability variables if required."><meta property="og:image" content="https://pharmaverse.github.io/admiral/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">admiral</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/admiral.html">Get Started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-user-guides">User Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-user-guides">
    <h6 class="dropdown-header" data-toc-skip>Getting Started</h6>
    <a class="dropdown-item" href="../articles/adsl.html">Creating a basic ADSL</a>
    <a class="dropdown-item" href="../articles/faq.html">FAQ</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Deep Dives on ADaMs</h6>
    <a class="dropdown-item" href="../articles/occds.html">Creating an OCCDS ADaM</a>
    <a class="dropdown-item" href="../articles/bds_finding.html">Creating a BDS Findings ADAM</a>
    <a class="dropdown-item" href="../articles/bds_exposure.html">Creating a BDS Exposure ADaM</a>
    <a class="dropdown-item" href="../articles/bds_tte.html">Creating a BDS Time-to-Event ADaM</a>
    <h6 class="dropdown-header" data-toc-skip>Advanced User Guides</h6>
    <a class="dropdown-item" href="../articles/imputation.html">Date and Time Imputation</a>
    <a class="dropdown-item" href="../articles/higher_order.html">Higher Order Functions</a>
    <a class="dropdown-item" href="../articles/queries_dataset.html">Queries Dataset Documentation</a>
    <a class="dropdown-item" href="../articles/lab_grading.html">Lab Grading</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-community">Community</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-community">
    <a class="dropdown-item" href="../articles/contribution_model.html">Contribute to admiral</a>
    <a class="external-link dropdown-item" href="https://app.slack.com/client/T028PB489D3/C02M8KN8269">Find us on Slack</a>
    <a class="external-link dropdown-item" href="https://pharmaverse.org/">Welcome to the Pharmaverse</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Derive Death Cause</h1>
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiral/blob/main/R/derive_var_dthcaus.R" class="external-link"><code>R/derive_var_dthcaus.R</code></a></small>
      <div class="d-none name"><code>derive_var_dthcaus.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Derive death cause (<code>DTHCAUS</code>) and add traceability variables if required.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">derive_var_dthcaus</span><span class="op">(</span>
  <span class="va">dataset</span>,
  <span class="va">...</span>,
  <span class="va">source_datasets</span>,
  subject_keys <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">STUDYID</span>, <span class="va">USUBJID</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu">dthcaus_source</span><span class="op">(</span>
  <span class="va">dataset_name</span>,
  <span class="va">filter</span>,
  <span class="va">date</span>,
  order <span class="op">=</span> <span class="cn">NULL</span>,
  mode <span class="op">=</span> <span class="st">"first"</span>,
  <span class="va">dthcaus</span>,
  traceability_vars <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dataset</dt>
<dd><p>Input dataset.</p>
<p>The variables specified by <code>subject_keys</code> are required.</p></dd>
<dt>...</dt>
<dd><p>Objects of class "dthcaus_source" created by <code>dthcaus_source()</code>.</p></dd>
<dt>source_datasets</dt>
<dd><p>A named <code>list</code> containing datasets in which to search for the
death cause</p></dd>
<dt>subject_keys</dt>
<dd><p>Variables to uniquely identify a subject</p>
<p>A list of quosures where the expressions are symbols as returned by
<code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> is expected.</p></dd>
<dt>dataset_name</dt>
<dd><p>The name of the dataset, i.e. a string, used to search for
the death cause.</p></dd>
<dt>filter</dt>
<dd><p>An expression used for filtering <code>dataset</code>.</p></dd>
<dt>date</dt>
<dd><p>A date or datetime variable to be used for sorting <code>dataset</code>.</p></dd>
<dt>order</dt>
<dd><p>Sort order</p>
<p>Additional variables to be used for sorting the <code>dataset</code> which is ordered by the
<code>date</code> and <code>order</code>. Can be used to avoid duplicate record warning.</p>
<p><em>Default</em>: <code>NULL</code></p>
<p><em>Permitted Values</em>: list of variables or <code>desc(&lt;variable&gt;)</code> function calls
created by <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code>, e.g., <code>vars(ADT, desc(AVAL))</code> or <code>NULL</code></p></dd>
<dt>mode</dt>
<dd><p>One of <code>"first"</code> or <code>"last"</code>.
Either the <code>"first"</code> or <code>"last"</code> observation is preserved from the <code>dataset</code>
which is ordered by <code>date</code>.</p></dd>
<dt>dthcaus</dt>
<dd><p>A variable name or a string literal --- if a variable name, e.g., <code>AEDECOD</code>,
it is the variable in the source dataset to be used to assign values to
<code>DTHCAUS</code>; if a string literal, e.g. <code>"Adverse Event"</code>, it is the fixed value
to be assigned to <code>DTHCAUS</code>.</p></dd>
<dt>traceability_vars</dt>
<dd><p>A named list returned by <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> listing the traceability variables,
e.g. <code>vars(DTHDOM = "DS", DTHSEQ = DSSEQ)</code>.
The left-hand side (names of the list elements) gives the names of the traceability variables
in the returned dataset.
The right-hand side (values of the list elements) gives the values of the traceability variables
in the returned dataset.
These can be either strings or symbols referring to existing variables.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>derive_var_dthcaus()</code> returns the input dataset with <code>DTHCAUS</code> variable added.
<code>dthcaus_source()</code> returns an object of class "dthcaus_source".</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function derives <code>DTHCAUS</code> along with the user-defined traceability
variables, if required. If a subject has death info from multiple sources,
the one from the source with the earliest death date will be used. If dates are
equivalent, the first source will be kept, so the user should provide the inputs in
the preferred order.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>
    
<ul><li><p><code>dthcaus_source</code>: Create objects of class "dthcaus_source"</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>ADSL Functions that returns variable appended to dataset: 
<code><a href="derive_var_age_years.html">derive_var_age_years</a>()</code>,
<code><a href="derive_var_disposition_status.html">derive_var_disposition_status</a>()</code>,
<code><a href="derive_var_extreme_dtm.html">derive_var_extreme_dtm</a>()</code>,
<code><a href="derive_var_extreme_dt.html">derive_var_extreme_dt</a>()</code>,
<code><a href="derive_vars_aage.html">derive_vars_aage</a>()</code>,
<code><a href="derive_vars_disposition_reason.html">derive_vars_disposition_reason</a>()</code></p>
<p>Source Specifications: 
<code><a href="assert_db_requirements.html">assert_db_requirements</a>()</code>,
<code><a href="assert_terms.html">assert_terms</a>()</code>,
<code><a href="assert_valid_queries.html">assert_valid_queries</a>()</code>,
<code><a href="censor_source.html">censor_source</a>()</code>,
<code><a href="date_source.html">date_source</a>()</code>,
<code><a href="tte_source_objects.html">death_event</a></code>,
<code><a href="event_source.html">event_source</a>()</code>,
<code><a href="extend_source_datasets.html">extend_source_datasets</a>()</code>,
<code><a href="filter_date_sources.html">filter_date_sources</a>()</code>,
<code><a href="format.sdg_select.html">format.sdg_select</a>()</code>,
<code><a href="format.smq_select.html">format.smq_select</a>()</code>,
<code><a href="list_tte_source_objects.html">list_tte_source_objects</a>()</code>,
<code><a href="params.html">params</a>()</code>,
<code><a href="query.html">query</a>()</code>,
<code><a href="sdg_select.html">sdg_select</a>()</code>,
<code><a href="smq_select.html">smq_select</a>()</code>,
<code><a href="tte_source.html">tte_source</a>()</code>,
<code><a href="validate_query.html">validate_query</a>()</code>,
<code><a href="validate_sdg_select.html">validate_sdg_select</a>()</code>,
<code><a href="validate_smq_select.html">validate_smq_select</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Shimeng Huang, Samia Kabi, Thomas Neitmann, Tamara Senior</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="op">~</span><span class="va">STUDYID</span>,  <span class="op">~</span><span class="va">USUBJID</span>,</span>
<span class="r-in">  <span class="st">"STUDY01"</span>, <span class="st">"PAT01"</span>,</span>
<span class="r-in">  <span class="st">"STUDY01"</span>, <span class="st">"PAT02"</span>,</span>
<span class="r-in">  <span class="st">"STUDY01"</span>, <span class="st">"PAT03"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">ae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="op">~</span><span class="va">STUDYID</span>,  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">AESEQ</span>, <span class="op">~</span><span class="va">AEDECOD</span>,       <span class="op">~</span><span class="va">AEOUT</span>,  <span class="op">~</span><span class="va">AEDTHDTC</span>,</span>
<span class="r-in">  <span class="st">"STUDY01"</span>, <span class="st">"PAT01"</span>,  <span class="fl">12</span>,     <span class="st">"SUDDEN DEATH"</span>, <span class="st">"FATAL"</span>, <span class="st">"2021-04-04"</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span class="r-in">    AEDTHDT <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="va">AEDTHDTC</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="op">~</span><span class="va">STUDYID</span>, <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">DSSEQ</span>, <span class="op">~</span><span class="va">DSDECOD</span>, <span class="op">~</span><span class="va">DSTERM</span>, <span class="op">~</span><span class="va">DSSTDTC</span>,</span>
<span class="r-in">  <span class="st">"STUDY01"</span>, <span class="st">"PAT02"</span>, <span class="fl">1</span>, <span class="st">"INFORMED CONSENT OBTAINED"</span>, <span class="st">"INFORMED CONSENT OBTAINED"</span>, <span class="st">"2021-04-03"</span>,</span>
<span class="r-in">  <span class="st">"STUDY01"</span>, <span class="st">"PAT02"</span>, <span class="fl">2</span>, <span class="st">"RANDOMIZATION"</span>, <span class="st">"RANDOMIZATION"</span>, <span class="st">"2021-04-11"</span>,</span>
<span class="r-in">  <span class="st">"STUDY01"</span>, <span class="st">"PAT02"</span>, <span class="fl">3</span>, <span class="st">"DEATH"</span>, <span class="st">"DEATH DUE TO PROGRESSION OF DISEASE"</span>, <span class="st">"2022-02-01"</span>,</span>
<span class="r-in">  <span class="st">"STUDY01"</span>, <span class="st">"PAT03"</span>, <span class="fl">1</span>, <span class="st">"DEATH"</span>, <span class="st">"POST STUDY REPORTING OF DEATH"</span>, <span class="st">"2022-03-03"</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span class="r-in">    DSSTDT <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="va">DSSTDTC</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Derive `DTHCAUS` only - for on-study deaths only</span></span>
<span class="r-in"><span class="va">src_ae</span> <span class="op">&lt;-</span> <span class="fu">dthcaus_source</span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"ae"</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="va">AEOUT</span> <span class="op">==</span> <span class="st">"FATAL"</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">AEDTHDT</span>,</span>
<span class="r-in">  mode <span class="op">=</span> <span class="st">"first"</span>,</span>
<span class="r-in">  dthcaus <span class="op">=</span> <span class="va">AEDECOD</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">src_ds</span> <span class="op">&lt;-</span> <span class="fu">dthcaus_source</span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"ds"</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="va">DSDECOD</span> <span class="op">==</span> <span class="st">"DEATH"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"DEATH DUE TO"</span>, <span class="va">DSTERM</span><span class="op">)</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">DSSTDT</span>,</span>
<span class="r-in">  mode <span class="op">=</span> <span class="st">"first"</span>,</span>
<span class="r-in">  dthcaus <span class="op">=</span> <span class="va">DSTERM</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">derive_var_dthcaus</span><span class="op">(</span><span class="va">adsl</span>, <span class="va">src_ae</span>, <span class="va">src_ds</span>, source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ae <span class="op">=</span> <span class="va">ae</span>, ds <span class="op">=</span> <span class="va">ds</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 x 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   STUDYID USUBJID DTHCAUS                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>                              </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span><span> STUDY01 PAT01   SUDDEN DEATH                       </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span><span> STUDY01 PAT02   DEATH DUE TO PROGRESSION OF DISEASE</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span><span> STUDY01 PAT03   </span><span style="color: #BB0000;">NA</span><span>                                 </span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Derive `DTHCAUS` and add traceability variables - for on-study deaths only</span></span>
<span class="r-in"><span class="va">src_ae</span> <span class="op">&lt;-</span> <span class="fu">dthcaus_source</span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"ae"</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="va">AEOUT</span> <span class="op">==</span> <span class="st">"FATAL"</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">AEDTHDT</span>,</span>
<span class="r-in">  mode <span class="op">=</span> <span class="st">"first"</span>,</span>
<span class="r-in">  dthcaus <span class="op">=</span> <span class="va">AEDECOD</span>,</span>
<span class="r-in">  traceability_vars <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span>DTHDOM <span class="op">=</span> <span class="st">"AE"</span>, DTHSEQ <span class="op">=</span> <span class="va">AESEQ</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">src_ds</span> <span class="op">&lt;-</span> <span class="fu">dthcaus_source</span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"ds"</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="va">DSDECOD</span> <span class="op">==</span> <span class="st">"DEATH"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"DEATH DUE TO"</span>, <span class="va">DSTERM</span><span class="op">)</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">DSSTDT</span>,</span>
<span class="r-in">  mode <span class="op">=</span> <span class="st">"first"</span>,</span>
<span class="r-in">  dthcaus <span class="op">=</span> <span class="va">DSTERM</span>,</span>
<span class="r-in">  traceability_vars <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span>DTHDOM <span class="op">=</span> <span class="st">"DS"</span>, DTHSEQ <span class="op">=</span> <span class="va">DSSEQ</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">derive_var_dthcaus</span><span class="op">(</span><span class="va">adsl</span>, <span class="va">src_ae</span>, <span class="va">src_ds</span>, source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ae <span class="op">=</span> <span class="va">ae</span>, ds <span class="op">=</span> <span class="va">ds</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 x 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   STUDYID USUBJID DTHCAUS                             DTHDOM DTHSEQ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>                               </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span><span> STUDY01 PAT01   SUDDEN DEATH                        AE         12</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span><span> STUDY01 PAT02   DEATH DUE TO PROGRESSION OF DISEASE DS          3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span><span> STUDY01 PAT03   </span><span style="color: #BB0000;">NA</span><span>                                  </span><span style="color: #BB0000;">NA</span><span>         </span><span style="color: #BB0000;">NA</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Derive `DTHCAUS` as above - now including post-study deaths with different `DTHCAUS` value</span></span>
<span class="r-in"><span class="va">src_ae</span> <span class="op">&lt;-</span> <span class="fu">dthcaus_source</span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"ae"</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="va">AEOUT</span> <span class="op">==</span> <span class="st">"FATAL"</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">AEDTHDT</span>,</span>
<span class="r-in">  mode <span class="op">=</span> <span class="st">"first"</span>,</span>
<span class="r-in">  dthcaus <span class="op">=</span> <span class="va">AEDECOD</span>,</span>
<span class="r-in">  traceability_vars <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span>DTHDOM <span class="op">=</span> <span class="st">"AE"</span>, DTHSEQ <span class="op">=</span> <span class="va">AESEQ</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">src_ds</span> <span class="op">&lt;-</span> <span class="fu">dthcaus_source</span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"ds"</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="va">DSDECOD</span> <span class="op">==</span> <span class="st">"DEATH"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"DEATH DUE TO"</span>, <span class="va">DSTERM</span><span class="op">)</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">DSSTDT</span>,</span>
<span class="r-in">  mode <span class="op">=</span> <span class="st">"first"</span>,</span>
<span class="r-in">  dthcaus <span class="op">=</span> <span class="va">DSTERM</span>,</span>
<span class="r-in">  traceability_vars <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span>DTHDOM <span class="op">=</span> <span class="st">"DS"</span>, DTHSEQ <span class="op">=</span> <span class="va">DSSEQ</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">src_ds_post</span> <span class="op">&lt;-</span> <span class="fu">dthcaus_source</span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"ds"</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="va">DSDECOD</span> <span class="op">==</span> <span class="st">"DEATH"</span> <span class="op">&amp;</span> <span class="va">DSTERM</span> <span class="op">==</span> <span class="st">"POST STUDY REPORTING OF DEATH"</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">DSSTDT</span>,</span>
<span class="r-in">  mode <span class="op">=</span> <span class="st">"first"</span>,</span>
<span class="r-in">  dthcaus <span class="op">=</span> <span class="st">"POST STUDY: UNKNOWN CAUSE"</span>,</span>
<span class="r-in">  traceability_vars <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span>DTHDOM <span class="op">=</span> <span class="st">"DS"</span>, DTHSEQ <span class="op">=</span> <span class="va">DSSEQ</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">derive_var_dthcaus</span><span class="op">(</span><span class="va">adsl</span>, <span class="va">src_ae</span>, <span class="va">src_ds</span>, <span class="va">src_ds_post</span>, source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ae <span class="op">=</span> <span class="va">ae</span>, ds <span class="op">=</span> <span class="va">ds</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 x 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   STUDYID USUBJID DTHCAUS                             DTHDOM DTHSEQ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>                               </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span><span> STUDY01 PAT01   SUDDEN DEATH                        AE         12</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span><span> STUDY01 PAT02   DEATH DUE TO PROGRESSION OF DISEASE DS          3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span><span> STUDY01 PAT03   POST STUDY: UNKNOWN CAUSE           DS          1</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Thomas Neitmann, Stefan Bundfuss, Ben Straub, Samia Kabi, Gordon Miller, Teckla Akinyi, Andrew Smith, Konstantina Koukourikou, Ross Farrugia, Eric Simms, Annie Yang, Robin Koeger, Sophie Shapcott, Ojesh Upadhyay, Jack McGavigan, Kamila Duniec, Gayatri G, Alana Harris, Mahdi About, Pooja Kumari, Claudia Carlucci, Daniil Stefonishin, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

