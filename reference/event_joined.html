<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a event_joined Object â€” event_joined â€¢ admiral</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a event_joined Object â€” event_joined"><meta name="description" content="The event_joined object is used to define events as input for the
derive_extreme_event() and derive_vars_extreme_event() functions.
This object should be used if the event does not depend on a single
observation of the source dataset but on multiple observations. For example,
if the event needs to be confirmed by a second observation of the source
dataset.
The events are selected by calling filter_joined(). See its documentation
for more details."><meta property="og:description" content="The event_joined object is used to define events as input for the
derive_extreme_event() and derive_vars_extreme_event() functions.
This object should be used if the event does not depend on a single
observation of the source dataset but on multiple observations. For example,
if the event needs to be confirmed by a second observation of the source
dataset.
The events are selected by calling filter_joined(). See its documentation
for more details."><meta property="og:image" content="https://pharmaverse.github.io/admiral/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">admiral</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-get-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Get Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-get-started"><li><a class="dropdown-item" href="../articles/admiral.html">Get Started</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/pharmaverse/admiral/blob/main/inst/cheatsheet/admiral_cheatsheet.pdf">Cheatsheet</a></li>
    <li><a class="dropdown-item" href="https://pharmaverse.github.io/admiraldiscovery/articles/presentation_archive.html">Presentation Archive</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-user-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">User Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-user-guides"><li><h6 class="dropdown-header" data-toc-skip>General Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/concepts_conventions.html">Programming Concepts and Conventions</a></li>
    <li><a class="dropdown-item" href="../articles/generic.html">Generic Derivations</a></li>
    <li><a class="dropdown-item" href="../articles/higher_order.html">Higher Order Functions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>ADaM Script Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/adsl.html">Creating a Basic ADSL</a></li>
    <li><a class="dropdown-item" href="../articles/occds.html">Creating an OCCDS ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_finding.html">Creating a BDS Findings ADAM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_exposure.html">Creating a BDS Exposure ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_tte.html">Creating a BDS Time-to-Event ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/questionnaires.html">Creating Questionnaire ADaMs</a></li>
    <li><a class="dropdown-item" href="../articles/pk_adnca.html">Creating a PK NCA or Population PK ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/hys_law.html">Hy's Law Implementation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Special Topics Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/imputation.html">Date and Time Imputation</a></li>
    <li><a class="dropdown-item" href="../articles/visits_periods.html">Visit and Period Variables</a></li>
    <li><a class="dropdown-item" href="../articles/queries_dataset.html">Queries Dataset Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/lab_grading.html">Lab Grading</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="https://pharmaverse.github.io/admiraldiscovery/articles/reactable.html">ðŸ”Ž Find my function</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://pharmaverse.slack.com/" aria-label="Slack"><span class="fa fa-slack"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/website-versions.html" aria-label="Previous Release Websites"><span class="fa fa-history"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/issues/new/choose" aria-label="New Issue"><span class="fa fa-bug"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a <code>event_joined</code> Object</h1>
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiral/blob/main/R/event.R" class="external-link"><code>R/event.R</code></a></small>
      <div class="d-none name"><code>event_joined.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>event_joined</code> object is used to define events as input for the
<code><a href="derive_extreme_event.html">derive_extreme_event()</a></code> and <code><a href="derive_vars_extreme_event.html">derive_vars_extreme_event()</a></code> functions.
This object should be used if the event does not depend on a single
observation of the source dataset but on multiple observations. For example,
if the event needs to be confirmed by a second observation of the source
dataset.</p>
<p>The events are selected by calling <code><a href="filter_joined.html">filter_joined()</a></code>. See its documentation
for more details.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">event_joined</span><span class="op">(</span></span>
<span>  dataset_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">condition</span>,</span>
<span>  order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">join_vars</span>,</span>
<span>  <span class="va">join_type</span>,</span>
<span>  first_cond_lower <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  first_cond_upper <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  set_values_to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep_source_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  description <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dataset-name">dataset_name<a class="anchor" aria-label="anchor" href="#arg-dataset-name"></a></dt>
<dd><p>Dataset name of the dataset to be used as input for the
event. The name refers to the dataset specified for <code>source_datasets</code> in
<code><a href="derive_extreme_event.html">derive_extreme_event()</a></code>. If the argument is not specified, the input
dataset (<code>dataset</code>) of <code><a href="derive_extreme_event.html">derive_extreme_event()</a></code> is used.</p>
<p><em>Permitted Values</em>: a character scalar</p></dd>


<dt id="arg-condition">condition<a class="anchor" aria-label="anchor" href="#arg-condition"></a></dt>
<dd><p>An unquoted condition for selecting the observations, which
will contribute to the extreme event.</p>
<p>The condition is applied to the joined dataset for selecting the confirmed
observations. The condition can include summary functions like <code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code> or
<code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code>. The joined dataset is grouped by the original observations. I.e.,
the summary function are applied to all observations up to the confirmation
observation. For example in the oncology setting when using this function
for confirmed best overall response,  <code>condition = AVALC == "CR" &amp; all(AVALC.join %in% c("CR", "NE")) &amp; count_vals(var = AVALC.join, val = "NE") &lt;= 1</code> selects observations with response "CR" and for all
observations up to the confirmation observation the response is "CR" or
"NE" and there is at most one "NE".</p>
<p><em>Permitted Values</em>: an unquoted condition</p></dd>


<dt id="arg-order">order<a class="anchor" aria-label="anchor" href="#arg-order"></a></dt>
<dd><p>If specified, the specified variables or expressions are used to
select the first observation.</p>
<p>For handling of <code>NA</code>s in sorting variables see <a href="../articles/generic.html#sort_order">Sort Order</a>.</p>
<p><em>Permitted Values</em>: list of expressions created by <code><a href="reexport-exprs.html">exprs()</a></code>, e.g.,
<code>exprs(ADT, desc(AVAL))</code> or <code>NULL</code></p></dd>


<dt id="arg-join-vars">join_vars<a class="anchor" aria-label="anchor" href="#arg-join-vars"></a></dt>
<dd><p>Variables to keep from joined dataset</p>
<p>The variables needed from the other observations should be specified for
this parameter. The specified variables are added to the joined dataset
with suffix ".join". For example to select all observations with <code>AVALC == "Y"</code> and <code>AVALC == "Y"</code> for at least one subsequent visit <code>join_vars = exprs(AVALC, AVISITN)</code> and <code>condition = AVALC == "Y" &amp; AVALC.join == "Y" &amp; AVISITN &lt; AVISITN.join</code> could be specified.</p>
<p>The <code>*.join</code> variables are not included in the output dataset.</p>
<p><em>Permitted Values</em>: a named list of expressions, e.g., created by <code><a href="reexport-exprs.html">exprs()</a></code></p></dd>


<dt id="arg-join-type">join_type<a class="anchor" aria-label="anchor" href="#arg-join-type"></a></dt>
<dd><p>Observations to keep after joining</p>
<p>The argument determines which of the joined observations are kept with
respect to the original observation. For example, if <code>join_type = "after"</code> is specified all observations after the original observations are
kept.</p>
<p><em>Permitted Values:</em> <code>"before"</code>, <code>"after"</code>, <code>"all"</code></p></dd>


<dt id="arg-first-cond-lower">first_cond_lower<a class="anchor" aria-label="anchor" href="#arg-first-cond-lower"></a></dt>
<dd><p>Condition for selecting range of data (before)</p>
<p>If this argument is specified, the other observations are restricted from
the first observation before the current observation where the specified
condition is fulfilled up to the current observation. If the condition is
not fulfilled for any of the other observations, no observations are
considered, i.e., the observation is not flagged.</p>
<p>This parameter should be specified if <code>condition</code> contains summary
functions which should not apply to all observations but only from a
certain observation before the current observation up to the current
observation.</p>
<p><em>Permitted Values</em>: an unquoted condition</p></dd>


<dt id="arg-first-cond-upper">first_cond_upper<a class="anchor" aria-label="anchor" href="#arg-first-cond-upper"></a></dt>
<dd><p>Condition for selecting range of data (after)</p>
<p>If this argument is specified, the other observations are restricted up to
the first observation where the specified condition is fulfilled. If the
condition is not fulfilled for any of the other observations, no
observations are considered, i.e., the observation is not flagged.</p>
<p>This parameter should be specified if <code>condition</code> contains summary
functions which should not apply to all observations but only up to the
confirmation assessment.</p>
<p><em>Permitted Values</em>: an unquoted condition</p></dd>


<dt id="arg-set-values-to">set_values_to<a class="anchor" aria-label="anchor" href="#arg-set-values-to"></a></dt>
<dd><p>A named list returned by <code><a href="reexport-exprs.html">exprs()</a></code> defining the variables
to be set for the event, e.g. <code>exprs(PARAMCD = "WSP", PARAM  = "Worst Sleeping Problems")</code>. The values can be a symbol, a
character string, a numeric value, <code>NA</code> or an expression.</p>
<p><em>Permitted Values</em>: a named list of expressions, e.g., created by <code><a href="reexport-exprs.html">exprs()</a></code></p></dd>


<dt id="arg-keep-source-vars">keep_source_vars<a class="anchor" aria-label="anchor" href="#arg-keep-source-vars"></a></dt>
<dd><p>Variables to keep from the source dataset</p>
<p>The specified variables are kept for the selected observations. The
variables specified for <code>by_vars</code> (of <code><a href="derive_extreme_event.html">derive_extreme_event()</a></code>) and created
by <code>set_values_to</code> are always kept.</p>
<p><em>Permitted Values</em>: A list of expressions where each element is
a symbol or a tidyselect expression, e.g., <code>exprs(VISIT, VISITNUM, starts_with("RS"))</code>.</p></dd>


<dt id="arg-description">description<a class="anchor" aria-label="anchor" href="#arg-description"></a></dt>
<dd><p>Description of the event</p>
<p>The description does not affect the derivations where the event is used. It
is intended for documentation only.</p>
<p><em>Permitted Values</em>: a character scalar</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>event_joined</code></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="derive_extreme_event.html">derive_extreme_event()</a></code>, <code><a href="derive_vars_extreme_event.html">derive_vars_extreme_event()</a></code>, <code><a href="event.html">event()</a></code></p>
<p>Source Objects:
<code><a href="basket_select.html">basket_select</a>()</code>,
<code><a href="censor_source.html">censor_source</a>()</code>,
<code><a href="tte_source_objects.html">death_event</a></code>,
<code><a href="event.html">event</a>()</code>,
<code><a href="event_source.html">event_source</a>()</code>,
<code><a href="flag_event.html">flag_event</a>()</code>,
<code><a href="query.html">query</a>()</code>,
<code><a href="records_source.html">records_source</a>()</code>,
<code><a href="tte_source.html">tte_source</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Derive confirmed best overall response (using event_joined())</span></span></span>
<span class="r-in"><span><span class="co"># CR - complete response, PR - partial response, SD - stable disease</span></span></span>
<span class="r-in"><span><span class="co"># NE - not evaluable, PD - progressive disease</span></span></span>
<span class="r-in"><span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">TRTSDTC</span>,</span></span>
<span class="r-in"><span>  <span class="st">"1"</span>,      <span class="st">"2020-01-01"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"2"</span>,      <span class="st">"2019-12-12"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"3"</span>,      <span class="st">"2019-11-11"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"4"</span>,      <span class="st">"2019-12-30"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"5"</span>,      <span class="st">"2020-01-01"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"6"</span>,      <span class="st">"2020-02-02"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"7"</span>,      <span class="st">"2020-02-02"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"8"</span>,      <span class="st">"2020-02-01"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>TRTSDT <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="va">TRTSDTC</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">adrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">ADTC</span>,        <span class="op">~</span><span class="va">AVALC</span>,</span></span>
<span class="r-in"><span>  <span class="st">"1"</span>,      <span class="st">"2020-01-01"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"1"</span>,      <span class="st">"2020-02-01"</span>, <span class="st">"CR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"1"</span>,      <span class="st">"2020-02-16"</span>, <span class="st">"NE"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"1"</span>,      <span class="st">"2020-03-01"</span>, <span class="st">"CR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"1"</span>,      <span class="st">"2020-04-01"</span>, <span class="st">"SD"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"2"</span>,      <span class="st">"2020-01-01"</span>, <span class="st">"SD"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"2"</span>,      <span class="st">"2020-02-01"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"2"</span>,      <span class="st">"2020-03-01"</span>, <span class="st">"SD"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"2"</span>,      <span class="st">"2020-03-13"</span>, <span class="st">"CR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"4"</span>,      <span class="st">"2020-01-01"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"4"</span>,      <span class="st">"2020-03-01"</span>, <span class="st">"NE"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"4"</span>,      <span class="st">"2020-04-01"</span>, <span class="st">"NE"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"4"</span>,      <span class="st">"2020-05-01"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"5"</span>,      <span class="st">"2020-01-01"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"5"</span>,      <span class="st">"2020-01-10"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"5"</span>,      <span class="st">"2020-01-20"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"6"</span>,      <span class="st">"2020-02-06"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"6"</span>,      <span class="st">"2020-02-16"</span>, <span class="st">"CR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"6"</span>,      <span class="st">"2020-03-30"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"7"</span>,      <span class="st">"2020-02-06"</span>, <span class="st">"PR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"7"</span>,      <span class="st">"2020-02-16"</span>, <span class="st">"CR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"7"</span>,      <span class="st">"2020-04-01"</span>, <span class="st">"NE"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"8"</span>,      <span class="st">"2020-02-16"</span>, <span class="st">"PD"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    ADT <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="va">ADTC</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    PARAMCD <span class="op">=</span> <span class="st">"OVR"</span>,</span></span>
<span class="r-in"><span>    PARAM <span class="op">=</span> <span class="st">"Overall Response by Investigator"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="derive_vars_merged.html">derive_vars_merged</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    dataset_add <span class="op">=</span> <span class="va">adsl</span>,</span></span>
<span class="r-in"><span>    by_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    new_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">TRTSDT</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="derive_extreme_event.html">derive_extreme_event</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">adrs</span>,</span></span>
<span class="r-in"><span>  by_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  order <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">ADT</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  mode <span class="op">=</span> <span class="st">"first"</span>,</span></span>
<span class="r-in"><span>  source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adsl <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  events <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">event_joined</span><span class="op">(</span></span></span>
<span class="r-in"><span>      description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        <span class="st">"CR needs to be confirmed by a second CR at least 28 days later"</span>,</span></span>
<span class="r-in"><span>        <span class="st">"at most one NE is acceptable between the two assessments"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span>,</span></span>
<span class="r-in"><span>      join_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">AVALC</span>, <span class="va">ADT</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      join_type <span class="op">=</span> <span class="st">"after"</span>,</span></span>
<span class="r-in"><span>      first_cond_upper <span class="op">=</span> <span class="va">AVALC.join</span> <span class="op">==</span> <span class="st">"CR"</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>        <span class="va">ADT.join</span> <span class="op">&gt;=</span> <span class="va">ADT</span> <span class="op">+</span> <span class="fl">28</span>,</span></span>
<span class="r-in"><span>      condition <span class="op">=</span> <span class="va">AVALC</span> <span class="op">==</span> <span class="st">"CR"</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">AVALC.join</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CR"</span>, <span class="st">"NE"</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="count_vals.html">count_vals</a></span><span class="op">(</span>var <span class="op">=</span> <span class="va">AVALC.join</span>, val <span class="op">=</span> <span class="st">"NE"</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>      set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        AVALC <span class="op">=</span> <span class="st">"CR"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">event_joined</span><span class="op">(</span></span></span>
<span class="r-in"><span>      description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        <span class="st">"PR needs to be confirmed by a second CR or PR at least 28 days later,"</span>,</span></span>
<span class="r-in"><span>        <span class="st">"at most one NE is acceptable between the two assessments"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span>,</span></span>
<span class="r-in"><span>      join_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">AVALC</span>, <span class="va">ADT</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      join_type <span class="op">=</span> <span class="st">"after"</span>,</span></span>
<span class="r-in"><span>      first_cond_upper <span class="op">=</span> <span class="va">AVALC.join</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CR"</span>, <span class="st">"PR"</span><span class="op">)</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>        <span class="va">ADT.join</span> <span class="op">&gt;=</span> <span class="va">ADT</span> <span class="op">+</span> <span class="fl">28</span>,</span></span>
<span class="r-in"><span>      condition <span class="op">=</span> <span class="va">AVALC</span> <span class="op">==</span> <span class="st">"PR"</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">AVALC.join</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CR"</span>, <span class="st">"PR"</span>, <span class="st">"NE"</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="count_vals.html">count_vals</a></span><span class="op">(</span>var <span class="op">=</span> <span class="va">AVALC.join</span>, val <span class="op">=</span> <span class="st">"NE"</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>      set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        AVALC <span class="op">=</span> <span class="st">"PR"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="event.html">event</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        <span class="st">"CR, PR, or SD are considered as SD if occurring at least 28"</span>,</span></span>
<span class="r-in"><span>        <span class="st">"after treatment start"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span>,</span></span>
<span class="r-in"><span>      condition <span class="op">=</span> <span class="va">AVALC</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CR"</span>, <span class="st">"PR"</span>, <span class="st">"SD"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">ADT</span> <span class="op">&gt;=</span> <span class="va">TRTSDT</span> <span class="op">+</span> <span class="fl">28</span>,</span></span>
<span class="r-in"><span>      set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        AVALC <span class="op">=</span> <span class="st">"SD"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="event.html">event</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      condition <span class="op">=</span> <span class="va">AVALC</span> <span class="op">==</span> <span class="st">"PD"</span>,</span></span>
<span class="r-in"><span>      set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        AVALC <span class="op">=</span> <span class="st">"PD"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="event.html">event</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      condition <span class="op">=</span> <span class="va">AVALC</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CR"</span>, <span class="st">"PR"</span>, <span class="st">"SD"</span>, <span class="st">"NE"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        AVALC <span class="op">=</span> <span class="st">"NE"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="event.html">event</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      description <span class="op">=</span> <span class="st">"set response to MISSING for patients without records in ADRS"</span>,</span></span>
<span class="r-in"><span>      dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span></span>
<span class="r-in"><span>      condition <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>      set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        AVALC <span class="op">=</span> <span class="st">"MISSING"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span>,</span></span>
<span class="r-in"><span>      keep_source_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">TRTSDT</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    PARAMCD <span class="op">=</span> <span class="st">"CBOR"</span>,</span></span>
<span class="r-in"><span>    PARAM <span class="op">=</span> <span class="st">"Best Confirmed Overall Response by Investigator"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"CBOR"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Check duplicates: the dataset which consists of all records selected for any of</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> the events defined by `events` contains duplicate records with respect to</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> `USUBJID` and `ADT`</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">â„¹</span> Run `admiral::get_duplicates_dataset()` to access the duplicate records</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 Ã— 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID ADTC       AVALC   ADT        PARAMCD PARAM                 TRTSDT    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 1       2020-01-01 PR      2020-01-01 CBOR    Best Confirmed Overaâ€¦ 2020-01-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2       2020-01-01 NE      2020-01-01 CBOR    Best Confirmed Overaâ€¦ 2019-12-12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 3       <span style="color: #BB0000;">NA</span>         MISSING <span style="color: #BB0000;">NA</span>         CBOR    Best Confirmed Overaâ€¦ 2019-11-11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 4       2020-01-01 NE      2020-01-01 CBOR    Best Confirmed Overaâ€¦ 2019-12-30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 5       2020-01-01 NE      2020-01-01 CBOR    Best Confirmed Overaâ€¦ 2020-01-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 6       2020-02-06 PR      2020-02-06 CBOR    Best Confirmed Overaâ€¦ 2020-02-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> 7       2020-02-06 NE      2020-02-06 CBOR    Best Confirmed Overaâ€¦ 2020-02-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> 8       2020-02-16 PD      2020-02-16 CBOR    Best Confirmed Overaâ€¦ 2020-02-01</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ben Straub, Stefan Bundfuss, Jeffrey Dickinson, Ross Farrugia, Fanny Gautier, Dinakar Kulkarni, Edoardo Mancini, Sadchla Mascary, Gordon Miller, Jim Rothstein, Sophie Shapcott, Eric Simms, Daniel Sjoberg, Stefan Thoma, Phillip Webster, Zelos Zhu, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

