<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Derive a Time-to-Event Parameter â€” derive_param_tte â€¢ admiral</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Derive a Time-to-Event Parameter â€” derive_param_tte"><meta name="description" content="Add a time-to-event parameter to the input dataset."><meta property="og:description" content="Add a time-to-event parameter to the input dataset."><meta property="og:image" content="https://pharmaverse.github.io/admiral/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">admiral</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-get-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Get Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-get-started"><li><a class="dropdown-item" href="../articles/admiral.html">Get Started</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/pharmaverse/admiral/blob/main/inst/cheatsheet/admiral_cheatsheet.pdf">Cheatsheet</a></li>
    <li><a class="dropdown-item" href="https://pharmaverse.github.io/admiraldiscovery/articles/presentation_archive.html">Presentation Archive</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-user-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">User Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-user-guides"><li><h6 class="dropdown-header" data-toc-skip>General Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/concepts_conventions.html">Programming Concepts and Conventions</a></li>
    <li><a class="dropdown-item" href="../articles/generic.html">Generic Derivations</a></li>
    <li><a class="dropdown-item" href="../articles/higher_order.html">Higher Order Functions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>ADaM Script Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/adsl.html">Creating a Basic ADSL</a></li>
    <li><a class="dropdown-item" href="../articles/occds.html">Creating an OCCDS ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_finding.html">Creating a BDS Findings ADAM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_exposure.html">Creating a BDS Exposure ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_tte.html">Creating a BDS Time-to-Event ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/questionnaires.html">Creating Questionnaire ADaMs</a></li>
    <li><a class="dropdown-item" href="../articles/pk_adnca.html">Creating a PK NCA or Population PK ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/hys_law.html">Hy's Law Implementation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Special Topics Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/imputation.html">Date and Time Imputation</a></li>
    <li><a class="dropdown-item" href="../articles/visits_periods.html">Visit and Period Variables</a></li>
    <li><a class="dropdown-item" href="../articles/queries_dataset.html">Queries Dataset Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/lab_grading.html">Lab Grading</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="https://pharmaverse.github.io/admiraldiscovery/articles/reactable.html">ðŸ”Ž Find my function</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://pharmaverse.slack.com/" aria-label="Slack"><span class="fa fa-slack"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/website-versions.html" aria-label="Previous Release Websites"><span class="fa fa-history"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/issues/new/choose" aria-label="New Issue"><span class="fa fa-bug"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Derive a Time-to-Event Parameter</h1>
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiral/blob/main/R/derive_param_tte.R" class="external-link"><code>R/derive_param_tte.R</code></a></small>
      <div class="d-none name"><code>derive_param_tte.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add a time-to-event parameter to the input dataset.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">derive_param_tte</span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">dataset_adsl</span>,</span>
<span>  <span class="va">source_datasets</span>,</span>
<span>  by_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_date <span class="op">=</span> <span class="va">TRTSDT</span>,</span>
<span>  <span class="va">event_conditions</span>,</span>
<span>  <span class="va">censor_conditions</span>,</span>
<span>  create_datetime <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">set_values_to</span>,</span>
<span>  subject_keys <span class="op">=</span> <span class="fu"><a href="get_admiral_option.html">get_admiral_option</a></span><span class="op">(</span><span class="st">"subject_keys"</span><span class="op">)</span>,</span>
<span>  check_type <span class="op">=</span> <span class="st">"warning"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dataset">dataset<a class="anchor" aria-label="anchor" href="#arg-dataset"></a></dt>
<dd><p>Input dataset
<code>PARAMCD</code> is expected.</p></dd>


<dt id="arg-dataset-adsl">dataset_adsl<a class="anchor" aria-label="anchor" href="#arg-dataset-adsl"></a></dt>
<dd><p>ADSL input dataset</p>
<p>The variables specified for <code>start_date</code>, and
<code>subject_keys</code> are expected.</p></dd>


<dt id="arg-source-datasets">source_datasets<a class="anchor" aria-label="anchor" href="#arg-source-datasets"></a></dt>
<dd><p>Source datasets</p>
<p>A named list of datasets is expected. The <code>dataset_name</code> field of
<code><a href="tte_source.html">tte_source()</a></code> refers to the dataset provided in the list.</p></dd>


<dt id="arg-by-vars">by_vars<a class="anchor" aria-label="anchor" href="#arg-by-vars"></a></dt>
<dd><p>By variables</p>
<p>If the parameter is specified, separate time to event parameters are
derived for each by group.</p>
<p>The by variables must be in at least one of the source datasets. Each
source dataset must contain either all by variables or none of the by
variables.</p>
<p>The by variables are not included in the output dataset.</p>
<p><em>Permitted Values</em>: list of variables created by <code><a href="reexport-exprs.html">exprs()</a></code>
e.g. <code>exprs(USUBJID, VISIT)</code></p></dd>


<dt id="arg-start-date">start_date<a class="anchor" aria-label="anchor" href="#arg-start-date"></a></dt>
<dd><p>Time to event origin date</p>
<p>The variable <code>STARTDT</code> is set to the specified date. The value is taken
from the ADSL dataset.</p>
<p>If the event or censoring date is before the origin date, <code>ADT</code> is set to
the origin date.</p></dd>


<dt id="arg-event-conditions">event_conditions<a class="anchor" aria-label="anchor" href="#arg-event-conditions"></a></dt>
<dd><p>Sources and conditions defining events</p>
<p>A list of <code><a href="event_source.html">event_source()</a></code> objects is expected.</p></dd>


<dt id="arg-censor-conditions">censor_conditions<a class="anchor" aria-label="anchor" href="#arg-censor-conditions"></a></dt>
<dd><p>Sources and conditions defining censorings</p>
<p>A list of <code><a href="censor_source.html">censor_source()</a></code> objects is expected.</p></dd>


<dt id="arg-create-datetime">create_datetime<a class="anchor" aria-label="anchor" href="#arg-create-datetime"></a></dt>
<dd><p>Create datetime variables?</p>
<p>If set to <code>TRUE</code>, variables <code>ADTM</code> and <code>STARTDTM</code> are created. Otherwise,
variables <code>ADT</code> and <code>STARTDT</code> are created.</p></dd>


<dt id="arg-set-values-to">set_values_to<a class="anchor" aria-label="anchor" href="#arg-set-values-to"></a></dt>
<dd><p>Variables to set</p>
<p>A named list returned by <code><a href="reexport-exprs.html">exprs()</a></code> defining the variables to be set for the
new parameter, e.g. <code>exprs(PARAMCD = "OS", PARAM = "Overall Survival")</code> is
expected. The values must be symbols, character strings, numeric values,
expressions, or <code>NA</code>.</p></dd>


<dt id="arg-subject-keys">subject_keys<a class="anchor" aria-label="anchor" href="#arg-subject-keys"></a></dt>
<dd><p>Variables to uniquely identify a subject</p>
<p>A list of symbols created using <code><a href="reexport-exprs.html">exprs()</a></code> is expected.</p></dd>


<dt id="arg-check-type">check_type<a class="anchor" aria-label="anchor" href="#arg-check-type"></a></dt>
<dd><p>Check uniqueness</p>
<p>If <code>"warning"</code>, <code>"message"</code>, or <code>"error"</code> is specified, the specified message is issued
if the observations of the source datasets are not unique with respect to the
by variables and the date and order specified in the <code><a href="event_source.html">event_source()</a></code> and
<code><a href="censor_source.html">censor_source()</a></code> objects.</p>
<p><em>Permitted Values</em>: <code>"none"</code>, <code>"message"</code>, <code>"warning"</code>, <code>"error"</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input dataset with the new parameter added</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The following steps are performed to create the observations of the
new parameter:</p>
<p><strong>Deriving the events:</strong></p>
<ol><li><p>For each event source dataset the observations as
specified by the <code>filter</code> element are selected. Then for each patient the
first observation (with respect to <code>date</code> and <code>order</code>) is selected.</p></li>
<li><p>The <code>ADT</code> variable is set to the variable specified by the
<code>date</code> element. If the date variable is a datetime variable, only
the datepart is copied.</p></li>
<li><p>The <code>CNSR</code> variable is added and set to the <code>censor</code> element.</p></li>
<li><p>The variables specified by the <code>set_values_to</code> element are
added.</p></li>
<li><p>The selected observations of all event source datasets are combined into a
single dataset.</p></li>
<li><p>For each patient the first observation (with respect to the
<code>ADT</code>/<code>ADTM</code> variable) from the single dataset is selected. If there is
more than one event with the same date, the first event with respect to the
order of events in <code>event_conditions</code> is selected.</p></li>
</ol><p><strong>Deriving the censoring observations:</strong></p>
<ol><li><p>For each censoring source dataset the observations as
specified by the <code>filter</code> element are selected. Then for each patient the
last observation (with respect to <code>date</code> and <code>order</code>) is selected.</p></li>
<li><p>The <code>ADT</code> variable is set to the variable specified by the
<code>date</code> element. If the date variable is a datetime variable, only
the datepart is copied.</p></li>
<li><p>The <code>CNSR</code> variable is added and set to the <code>censor</code> element.</p></li>
<li><p>The variables specified by the <code>set_values_to</code> element are
added.</p></li>
<li><p>The selected observations of all censoring source datasets are
combined into a single dataset.</p></li>
<li><p>For each patient the last observation (with respect to the
<code>ADT</code>/<code>ADTM</code> variable) from the single dataset is selected.  If there is
more than one censoring with the same date, the last censoring with respect
to the order of censorings in <code>censor_conditions</code> is selected.</p></li>
</ol><p>For each subject (as defined by the <code>subject_keys</code> parameter) an
observation is selected. If an event is available, the event observation is
selected. Otherwise the censoring observation is selected.</p>
<p>Finally:</p><ol><li><p>The variable specified for <code>start_date</code> is joined from the
ADSL dataset. Only subjects in both datasets are kept,
i.e., subjects with both an event or censoring and an observation in
<code>dataset_adsl</code>.</p></li>
<li><p>The variables as defined by the <code>set_values_to</code> parameter are added.</p></li>
<li><p>The <code>ADT</code>/<code>ADTM</code> variable is set to the maximum of <code>ADT</code>/<code>ADTM</code> and
<code>STARTDT</code>/<code>STARTDTM</code> (depending on the <code>create_datetime</code> parameter).</p></li>
<li><p>The new observations are added to the output dataset.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="event_source.html">event_source()</a></code>, <code><a href="censor_source.html">censor_source()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"admiral_adsl"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="va">admiral_adsl</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># derive overall survival parameter</span></span></span>
<span class="r-in"><span><span class="va">death</span> <span class="op">&lt;-</span> <span class="fu"><a href="event_source.html">event_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span></span>
<span class="r-in"><span>  filter <span class="op">=</span> <span class="va">DTHFL</span> <span class="op">==</span> <span class="st">"Y"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="va">DTHDT</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    EVNTDESC <span class="op">=</span> <span class="st">"DEATH"</span>,</span></span>
<span class="r-in"><span>    SRCDOM <span class="op">=</span> <span class="st">"ADSL"</span>,</span></span>
<span class="r-in"><span>    SRCVAR <span class="op">=</span> <span class="st">"DTHDT"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">last_alive_dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="censor_source.html">censor_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="va">LSTALVDT</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    EVNTDESC <span class="op">=</span> <span class="st">"LAST DATE KNOWN ALIVE"</span>,</span></span>
<span class="r-in"><span>    SRCDOM <span class="op">=</span> <span class="st">"ADSL"</span>,</span></span>
<span class="r-in"><span>    SRCVAR <span class="op">=</span> <span class="st">"LSTALVDT"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">derive_param_tte</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_adsl <span class="op">=</span> <span class="va">adsl</span>,</span></span>
<span class="r-in"><span>  event_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">death</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  censor_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">last_alive_dt</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adsl <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    PARAMCD <span class="op">=</span> <span class="st">"OS"</span>,</span></span>
<span class="r-in"><span>    PARAM <span class="op">=</span> <span class="st">"Overall Survival"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">STUDYID</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">20</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 11 Ã— 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    USUBJID     EVNTDESC  SRCDOM SRCVAR  CNSR ADT        STARTDT    PARAMCD PARAM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 01-701-1203 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2013-08-03 2013-02-02 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 01-701-1211 DEATH     ADSL   DTHDT      0 2013-01-14 2012-11-15 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 01-701-1234 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2013-09-22 2013-03-30 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 01-701-1239 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2014-07-11 2014-01-11 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 01-701-1275 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2014-06-14 2014-02-07 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 01-701-1287 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2014-07-26 2014-01-25 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 01-701-1294 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2013-06-14 2013-03-24 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 01-701-1302 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2013-11-05 2013-08-29 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 01-701-1317 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2014-11-20 2014-05-22 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 01-701-1324 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2013-04-02 2012-10-02 OS      Overâ€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 01-701-1341 LAST DATâ€¦ ADSL   LSTALâ€¦     1 2013-02-07 2013-01-05 OS      Overâ€¦</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># derive duration of response</span></span></span>
<span class="r-in"><span><span class="co"># only observations for subjects in dataset_adsl are created</span></span></span>
<span class="r-in"><span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">DTHFL</span>, <span class="op">~</span><span class="va">DTHDT</span>,            <span class="op">~</span><span class="va">RSPDT</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"Y"</span>,    <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-06-12"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-03-04"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"02"</span>,     <span class="st">"N"</span>,    <span class="cn">NA</span>,                <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>  <span class="st">"03"</span>,     <span class="st">"Y"</span>,    <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-08-21"</span><span class="op">)</span>, <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>  <span class="st">"04"</span>,     <span class="st">"N"</span>,    <span class="cn">NA</span>,                <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-04-14"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STUDYID <span class="op">=</span> <span class="st">"AB42"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">adrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">AVALC</span>, <span class="op">~</span><span class="va">ADT</span>,              <span class="op">~</span><span class="va">ASEQ</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"SD"</span>,   <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-01-03"</span><span class="op">)</span>, <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"PR"</span>,   <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-03-04"</span><span class="op">)</span>, <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"PD"</span>,   <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-05-05"</span><span class="op">)</span>, <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  <span class="st">"02"</span>,     <span class="st">"PD"</span>,   <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-02-03"</span><span class="op">)</span>, <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  <span class="st">"04"</span>,     <span class="st">"SD"</span>,   <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-02-13"</span><span class="op">)</span>, <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  <span class="st">"04"</span>,     <span class="st">"PR"</span>,   <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-04-14"</span><span class="op">)</span>, <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  <span class="st">"04"</span>,     <span class="st">"CR"</span>,   <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-05-15"</span><span class="op">)</span>, <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STUDYID <span class="op">=</span> <span class="st">"AB42"</span>, PARAMCD <span class="op">=</span> <span class="st">"OVR"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pd</span> <span class="op">&lt;-</span> <span class="fu"><a href="event_source.html">event_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_name <span class="op">=</span> <span class="st">"adrs"</span>,</span></span>
<span class="r-in"><span>  filter <span class="op">=</span> <span class="va">AVALC</span> <span class="op">==</span> <span class="st">"PD"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="va">ADT</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    EVENTDESC <span class="op">=</span> <span class="st">"PD"</span>,</span></span>
<span class="r-in"><span>    SRCDOM <span class="op">=</span> <span class="st">"ADRS"</span>,</span></span>
<span class="r-in"><span>    SRCVAR <span class="op">=</span> <span class="st">"ADTM"</span>,</span></span>
<span class="r-in"><span>    SRCSEQ <span class="op">=</span> <span class="va">ASEQ</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">death</span> <span class="op">&lt;-</span> <span class="fu"><a href="event_source.html">event_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span></span>
<span class="r-in"><span>  filter <span class="op">=</span> <span class="va">DTHFL</span> <span class="op">==</span> <span class="st">"Y"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="va">DTHDT</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    EVENTDESC <span class="op">=</span> <span class="st">"DEATH"</span>,</span></span>
<span class="r-in"><span>    SRCDOM <span class="op">=</span> <span class="st">"ADSL"</span>,</span></span>
<span class="r-in"><span>    SRCVAR <span class="op">=</span> <span class="st">"DTHDT"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lastvisit</span> <span class="op">&lt;-</span> <span class="fu"><a href="censor_source.html">censor_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_name <span class="op">=</span> <span class="st">"adrs"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="va">ADT</span>,</span></span>
<span class="r-in"><span>  censor <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    EVENTDESC <span class="op">=</span> <span class="st">"LAST TUMOR ASSESSMENT"</span>,</span></span>
<span class="r-in"><span>    SRCDOM <span class="op">=</span> <span class="st">"ADRS"</span>,</span></span>
<span class="r-in"><span>    SRCVAR <span class="op">=</span> <span class="st">"ADTM"</span>,</span></span>
<span class="r-in"><span>    SRCSEQ <span class="op">=</span> <span class="va">ASEQ</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">first_response</span> <span class="op">&lt;-</span> <span class="fu"><a href="censor_source.html">censor_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="va">RSPDT</span>,</span></span>
<span class="r-in"><span>  censor <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    EVENTDESC <span class="op">=</span> <span class="st">"FIRST RESPONSE"</span>,</span></span>
<span class="r-in"><span>    SRCDOM <span class="op">=</span> <span class="st">"ADSL"</span>,</span></span>
<span class="r-in"><span>    SRCVAR <span class="op">=</span> <span class="st">"RSPDT"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">derive_param_tte</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_adsl <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">RSPDT</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  start_date <span class="op">=</span> <span class="va">RSPDT</span>,</span></span>
<span class="r-in"><span>  event_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">pd</span>, <span class="va">death</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  censor_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">lastvisit</span>, <span class="va">first_response</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adsl <span class="op">=</span> <span class="va">adsl</span>, adrs <span class="op">=</span> <span class="va">adrs</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    PARAMCD <span class="op">=</span> <span class="st">"DURRSP"</span>,</span></span>
<span class="r-in"><span>    PARAM <span class="op">=</span> <span class="st">"Duration of Response"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 Ã— 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID ADT        STUDYID EVENTDESC     SRCDOM SRCVAR SRCSEQ  CNSR STARTDT   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 01      2021-05-05 AB42    PD            ADRS   ADTM        3     0 2021-03-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 04      2021-05-15 AB42    LAST TUMOR Aâ€¦ ADRS   ADTM        3     1 2021-04-14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># â„¹ 2 more variables: PARAMCD &lt;chr&gt;, PARAM &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># derive time to adverse event for each preferred term</span></span></span>
<span class="r-in"><span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">TRTSDT</span>,           <span class="op">~</span><span class="va">EOSDT</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2020-12-06"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-03-06"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"02"</span>,     <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-01-16"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-02-03"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STUDYID <span class="op">=</span> <span class="st">"AB42"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">AESTDTC</span>,           <span class="op">~</span><span class="va">AESEQ</span>, <span class="op">~</span><span class="va">AEDECOD</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"2021-01-03T10:56"</span>,      <span class="fl">1</span>, <span class="st">"Flu"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"2021-03-04"</span>,            <span class="fl">2</span>, <span class="st">"Cough"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"2021"</span>,                  <span class="fl">3</span>, <span class="st">"Flu"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STUDYID <span class="op">=</span> <span class="st">"AB42"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ae_ext</span> <span class="op">&lt;-</span> <span class="fu"><a href="derive_vars_dt.html">derive_vars_dt</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">ae</span>,</span></span>
<span class="r-in"><span>  dtc <span class="op">=</span> <span class="va">AESTDTC</span>,</span></span>
<span class="r-in"><span>  new_vars_prefix <span class="op">=</span> <span class="st">"AEST"</span>,</span></span>
<span class="r-in"><span>  highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span></span>
<span class="r-in"><span>  flag_imputation <span class="op">=</span> <span class="st">"none"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ttae</span> <span class="op">&lt;-</span> <span class="fu"><a href="event_source.html">event_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_name <span class="op">=</span> <span class="st">"ae"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="va">AESTDT</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    EVNTDESC <span class="op">=</span> <span class="st">"AE"</span>,</span></span>
<span class="r-in"><span>    SRCDOM <span class="op">=</span> <span class="st">"AE"</span>,</span></span>
<span class="r-in"><span>    SRCVAR <span class="op">=</span> <span class="st">"AESTDTC"</span>,</span></span>
<span class="r-in"><span>    SRCSEQ <span class="op">=</span> <span class="va">AESEQ</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">eos</span> <span class="op">&lt;-</span> <span class="fu"><a href="censor_source.html">censor_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="va">EOSDT</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    EVNTDESC <span class="op">=</span> <span class="st">"END OF STUDY"</span>,</span></span>
<span class="r-in"><span>    SRCDOM <span class="op">=</span> <span class="st">"ADSL"</span>,</span></span>
<span class="r-in"><span>    SRCVAR <span class="op">=</span> <span class="st">"EOSDT"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">derive_param_tte</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_adsl <span class="op">=</span> <span class="va">adsl</span>,</span></span>
<span class="r-in"><span>  by_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  start_date <span class="op">=</span> <span class="va">TRTSDT</span>,</span></span>
<span class="r-in"><span>  event_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ttae</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  censor_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">eos</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adsl <span class="op">=</span> <span class="va">adsl</span>, ae <span class="op">=</span> <span class="va">ae_ext</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    PARAMCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"TTAE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    PARAM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Time to First"</span>, <span class="va">AEDECOD</span>, <span class="st">"Adverse Event"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    PARCAT1 <span class="op">=</span> <span class="st">"TTAE"</span>,</span></span>
<span class="r-in"><span>    PARCAT2 <span class="op">=</span> <span class="va">AEDECOD</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">STARTDT</span>, <span class="va">PARAMCD</span>, <span class="va">PARAM</span>, <span class="va">ADT</span>, <span class="va">CNSR</span>, <span class="va">SRCSEQ</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 Ã— 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID STARTDT    PARAMCD PARAM                       ADT         CNSR SRCSEQ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 01      2020-12-06 TTAE1   Time to First Cough Adversâ€¦ 2021-03-04     0      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 01      2020-12-06 TTAE2   Time to First Flu Adverse â€¦ 2021-01-01     0      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 02      2021-01-16 TTAE1   Time to First Cough Adversâ€¦ 2021-02-03     1     <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 02      2021-01-16 TTAE2   Time to First Flu Adverse â€¦ 2021-02-03     1     <span style="color: #BB0000;">NA</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Resolve tie when serious AE share a date by sorting with order argument</span></span></span>
<span class="r-in"><span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">TRTSDT</span>,           <span class="op">~</span><span class="va">EOSDT</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2020-12-06"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-03-06"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"02"</span>,     <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-01-16"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-02-03"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STUDYID <span class="op">=</span> <span class="st">"AB42"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">AESTDTC</span>,     <span class="op">~</span><span class="va">AESEQ</span>, <span class="op">~</span><span class="va">AESER</span>, <span class="op">~</span><span class="va">AEDECOD</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"2021-01-03"</span>,      <span class="fl">1</span>, <span class="st">"Y"</span>,    <span class="st">"Flu"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"2021-01-03"</span>,      <span class="fl">2</span>, <span class="st">"Y"</span>,    <span class="st">"Cough"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"01"</span>,     <span class="st">"2021-01-20"</span>,      <span class="fl">3</span>, <span class="st">"N"</span>,    <span class="st">"Headache"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  AESTDT <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="va">AESTDTC</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  STUDYID <span class="op">=</span> <span class="st">"AB42"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">derive_param_tte</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset_adsl <span class="op">=</span> <span class="va">adsl</span>,</span></span>
<span class="r-in"><span>  start_date <span class="op">=</span> <span class="va">TRTSDT</span>,</span></span>
<span class="r-in"><span>  source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adsl <span class="op">=</span> <span class="va">adsl</span>, ae <span class="op">=</span> <span class="va">ae</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  event_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="event_source.html">event_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    dataset_name <span class="op">=</span> <span class="st">"ae"</span>,</span></span>
<span class="r-in"><span>    date <span class="op">=</span> <span class="va">AESTDT</span>,</span></span>
<span class="r-in"><span>    set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      EVENTDESC <span class="op">=</span> <span class="st">"Serious AE"</span>,</span></span>
<span class="r-in"><span>      SRCSEQ <span class="op">=</span> <span class="va">AESEQ</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    filter <span class="op">=</span> <span class="va">AESER</span> <span class="op">==</span> <span class="st">"Y"</span>,</span></span>
<span class="r-in"><span>    order <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">AESEQ</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  censor_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="censor_source.html">censor_source</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span></span>
<span class="r-in"><span>    date <span class="op">=</span> <span class="va">EOSDT</span>,</span></span>
<span class="r-in"><span>    censor <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span>EVENTDESC <span class="op">=</span> <span class="st">"End of Study"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    PARAMCD <span class="op">=</span> <span class="st">"TTSAE"</span>,</span></span>
<span class="r-in"><span>    PARAM <span class="op">=</span> <span class="st">"Time to First Serious AE"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 Ã— 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID STUDYID EVENTDESC    SRCSEQ  CNSR ADT        STARTDT    PARAMCD PARAM </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 01      AB42    Serious AE        1     0 2021-01-03 2020-12-06 TTSAE   Time â€¦</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 02      AB42    End of Study     <span style="color: #BB0000;">NA</span>     1 2021-02-03 2021-01-16 TTSAE   Time â€¦</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ben Straub, Stefan Bundfuss, Jeffrey Dickinson, Ross Farrugia, Fanny Gautier, Dinakar Kulkarni, Edoardo Mancini, Sadchla Mascary, Gordon Miller, Jim Rothstein, Sophie Shapcott, Eric Simms, Daniel Sjoberg, Stefan Thoma, Phillip Webster, Zelos Zhu, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

