<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Add a time-to-event parameter to the input dataset."><title>Derive a Time-to-Event Parameter — derive_param_tte • admiral</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Derive a Time-to-Event Parameter — derive_param_tte"><meta property="og:description" content="Add a time-to-event parameter to the input dataset."><meta property="og:image" content="https://pharmaverse.github.io/admiral/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">admiral</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/admiral.html">Get Started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-user-guides">User Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-user-guides">
    <h6 class="dropdown-header" data-toc-skip>Getting Started</h6>
    <a class="dropdown-item" href="../articles/adsl.html">Creating a basic ADSL</a>
    <a class="dropdown-item" href="../articles/faq.html">FAQ</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Deep Dives on ADaMs</h6>
    <a class="dropdown-item" href="../articles/occds.html">Creating an OCCDS ADaM</a>
    <a class="dropdown-item" href="../articles/bds_finding.html">Creating a BDS Findings ADAM</a>
    <a class="dropdown-item" href="../articles/bds_exposure.html">Creating a BDS Exposure ADaM</a>
    <a class="dropdown-item" href="../articles/bds_tte.html">Creating a BDS Time-to-Event ADaM</a>
    <h6 class="dropdown-header" data-toc-skip>Advanced User Guides</h6>
    <a class="dropdown-item" href="../articles/imputation.html">Date and Time Imputation</a>
    <a class="dropdown-item" href="../articles/higher_order.html">Higher Order Functions</a>
    <a class="dropdown-item" href="../articles/queries_dataset.html">Queries Dataset Documentation</a>
    <a class="dropdown-item" href="../articles/lab_grading.html">Lab Grading</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-community">Community</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-community">
    <a class="dropdown-item" href="../articles/contribution_model.html">Contribute to admiral</a>
    <a class="external-link dropdown-item" href="https://app.slack.com/client/T028PB489D3/C02M8KN8269">Find us on Slack</a>
    <a class="external-link dropdown-item" href="https://pharmaverse.org/">Welcome to the Pharmaverse</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Derive a Time-to-Event Parameter</h1>
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiral/blob/main/R/derive_param_tte.R" class="external-link"><code>R/derive_param_tte.R</code></a></small>
      <div class="d-none name"><code>derive_param_tte.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add a time-to-event parameter to the input dataset.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">derive_param_tte</span><span class="op">(</span>
  dataset <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">dataset_adsl</span>,
  <span class="va">source_datasets</span>,
  by_vars <span class="op">=</span> <span class="cn">NULL</span>,
  start_date <span class="op">=</span> <span class="va">TRTSDT</span>,
  <span class="va">event_conditions</span>,
  <span class="va">censor_conditions</span>,
  create_datetime <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">set_values_to</span>,
  subject_keys <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">STUDYID</span>, <span class="va">USUBJID</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dataset</dt>
<dd><p>Input dataset</p>
<p>The <code>PARAMCD</code> variable is expected.</p></dd>
<dt>dataset_adsl</dt>
<dd><p>ADSL input dataset</p>
<p>The variables specified for <code>start_date</code>, <code>start_imputation_flag</code>, and
<code>subject_keys</code> are expected.</p></dd>
<dt>source_datasets</dt>
<dd><p>Source datasets</p>
<p>A named list of datasets is expected. The <code>dataset_name</code> field of
<code><a href="tte_source.html">tte_source()</a></code> refers to the dataset provided in the list.</p></dd>
<dt>by_vars</dt>
<dd><p>By variables</p>
<p>If the parameter is specified, separate time to event parameters are
derived for each by group.</p>
<p>The by variables must be in at least one of the source datasets. Each
source dataset must contain either all by variables or none of the by
variables.</p>
<p>The by variables are not included in the output dataset.</p></dd>
<dt>start_date</dt>
<dd><p>Time to event origin date</p>
<p>The variable <code>STARTDT</code> is set to the specified date. The value is taken
from the ADSL dataset.</p>
<p>If the event or censoring date is before the origin date, <code>ADT</code> is set to
the origin date.</p>
<p>If the specified variable is imputed, the corresponding date imputation
flag must specified for <code>start_imputation_flag</code>.</p></dd>
<dt>event_conditions</dt>
<dd><p>Sources and conditions defining events</p>
<p>A list of <code><a href="event_source.html">event_source()</a></code> objects is expected.</p></dd>
<dt>censor_conditions</dt>
<dd><p>Sources and conditions defining censorings</p>
<p>A list of <code><a href="censor_source.html">censor_source()</a></code> objects is expected.</p></dd>
<dt>create_datetime</dt>
<dd><p>Create datetime variables?</p>
<p>If set to <code>TRUE</code>, variables <code>ADTM</code> and <code>STARTDTM</code> are created. Otherwise,
variables <code>ADT</code> and <code>STARTDT</code> are created.</p></dd>
<dt>set_values_to</dt>
<dd><p>Variables to set</p>
<p>A named list returned by <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> defining the variables to be set for the
new parameter, e.g. <code>vars(PARAMCD = "OS", PARAM = "Overall Survival")</code> is
expected. The values must be symbols, character strings, numeric values,
expressions, or <code>NA</code>.</p></dd>
<dt>subject_keys</dt>
<dd><p>Variables to uniquely identify a subject</p>
<p>A list of symbols created using <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> is expected.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input dataset with the new parameter added</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The following steps are performed to create the observations of the
new parameter:</p>
<p><strong>Deriving the events:</strong></p>
<ol><li><p>For each event source dataset the observations as
specified by the <code>filter</code> element are selected. Then for each patient the
first observation (with respect to <code>date</code>) is selected.</p></li>
<li><p>The <code>ADT</code> variable is set to the variable specified by the
<code>date</code> element. If the date variable is a datetime variable, only
the datepart is copied.</p></li>
<li><p>The <code>CNSR</code> variable is added and set to the <code>censor</code> element.</p></li>
<li><p>The variables specified by the <code>set_values_to</code> element are
added.</p></li>
<li><p>The selected observations of all event source datasets are combined into a
single dataset.</p></li>
<li><p>For each patient the first observation (with respect to the <code>ADT</code>
variable) from the single dataset is selected.</p></li>
</ol><p><strong>Deriving the censoring observations:</strong></p>
<ol><li><p>For each censoring source dataset the observations as
specified by the <code>filter</code> element are selected. Then for each patient the
last observation (with respect to <code>date</code>) is selected.</p></li>
<li><p>The <code>ADT</code> variable is set to the variable specified by the
<code>date</code> element. If the date variable is a datetime variable, only
the datepart is copied.</p></li>
<li><p>The <code>CNSR</code> variable is added and set to the <code>censor</code> element.</p></li>
<li><p>The variables specified by the <code>set_values_to</code> element are
added.</p></li>
<li><p>The selected observations of all censoring source datasets are
combined into a single dataset.</p></li>
<li><p>For each patient the last observation (with respect to the <code>ADT</code>
variable) from the single dataset is selected.</p></li>
</ol><p>For each subject (as defined by the <code>subject_keys</code> parameter) an
observation is selected. If an event is available, the event observation is
selected. Otherwise the censoring observation is selected.</p>
<p>Finally</p><ol><li><p>the variables specified for <code>start_date</code> and <code>start_imputation_flag</code> are
joined from the ADSL dataset,</p></li>
<li><p>the variables as defined by the <code>set_values_to</code> parameter are added,</p></li>
<li><p>the <code>ADT</code>/<code>ADTM</code> variable is set to the maximum of <code>ADT</code>/<code>ADTM</code> and
<code>STARTDT</code>/<code>STARTDTM</code> (depending on the <code>create_datetime</code> parameter), and</p></li>
<li><p>the new observations are added to the output dataset.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Stefan Bundfuss</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"admiral_adsl"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="va">admiral_adsl</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">death</span> <span class="op">&lt;-</span> <span class="fu"><a href="event_source.html">event_source</a></span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="va">DTHFL</span> <span class="op">==</span> <span class="st">"Y"</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">DTHDT</span>,</span>
<span class="r-in">  set_values_to <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span></span>
<span class="r-in">    EVNTDESC <span class="op">=</span> <span class="st">"DEATH"</span>,</span>
<span class="r-in">    SRCDOM <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span class="r-in">    SRCVAR <span class="op">=</span> <span class="st">"DTHDT"</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">last_alive_dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="censor_source.html">censor_source</a></span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">LSTALVDT</span>,</span>
<span class="r-in">  set_values_to <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span></span>
<span class="r-in">    EVNTDESC <span class="op">=</span> <span class="st">"LAST DATE KNOWN ALIVE"</span>,</span>
<span class="r-in">    SRCDOM <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span class="r-in">    SRCVAR <span class="op">=</span> <span class="st">"LSTALVDT"</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">derive_param_tte</span><span class="op">(</span></span>
<span class="r-in">  dataset_adsl <span class="op">=</span> <span class="va">adsl</span>,</span>
<span class="r-in">  event_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">death</span><span class="op">)</span>,</span>
<span class="r-in">  censor_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">last_alive_dt</span><span class="op">)</span>,</span>
<span class="r-in">  source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adsl <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span>,</span>
<span class="r-in">  set_values_to <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span></span>
<span class="r-in">    PARAMCD <span class="op">=</span> <span class="st">"OS"</span>,</span>
<span class="r-in">    PARAM <span class="op">=</span> <span class="st">"Overall Survival"</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">STUDYID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">20</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"># A tibble: 11 x 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    USUBJID  EVNTDESC    SRCDOM SRCVAR  CNSR ADT        STARTDT    PARAMCD PARAM </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>       </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>  </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>  </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;date&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;date&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span> </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2013-08-03 2013-02-02 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 2</span><span> 01-701-… DEATH       ADSL   DTHDT      0 2013-01-14 2012-11-15 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 3</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2013-09-22 2013-03-30 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 4</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2014-07-11 2014-01-11 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 5</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2014-06-14 2014-02-07 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 6</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2014-07-26 2014-01-25 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 7</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2013-06-14 2013-03-24 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 8</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2013-11-05 2013-08-29 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 9</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2014-11-20 2014-05-22 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">10</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2013-04-02 2012-10-02 OS      Overa…</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">11</span><span> 01-701-… LAST DATE … ADSL   LSTAL…     1 2013-02-07 2013-01-05 OS      Overa…</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># derive time to adverse event for each preferred term #</span></span>
<span class="r-in"><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">TRTSDT</span>,           <span class="op">~</span><span class="va">EOSDT</span>,</span>
<span class="r-in">  <span class="st">"01"</span>,     <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2020-12-06"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-03-06"</span><span class="op">)</span>,</span>
<span class="r-in">  <span class="st">"02"</span>,     <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-01-16"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2021-02-03"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STUDYID <span class="op">=</span> <span class="st">"AB42"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">AESTDTC</span>,           <span class="op">~</span><span class="va">AESEQ</span>, <span class="op">~</span><span class="va">AEDECOD</span>,</span>
<span class="r-in">  <span class="st">"01"</span>,     <span class="st">"2021-01-03T10:56"</span>, <span class="fl">1</span>,      <span class="st">"Flu"</span>,</span>
<span class="r-in">  <span class="st">"01"</span>,     <span class="st">"2021-03-04"</span>,       <span class="fl">2</span>,      <span class="st">"Cough"</span>,</span>
<span class="r-in">  <span class="st">"01"</span>,     <span class="st">"2021"</span>,             <span class="fl">3</span>,      <span class="st">"Flu"</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STUDYID <span class="op">=</span> <span class="st">"AB42"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ae_ext</span> <span class="op">&lt;-</span> <span class="fu"><a href="derive_vars_dt.html">derive_vars_dt</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="va">ae</span>,</span>
<span class="r-in">  dtc <span class="op">=</span> <span class="va">AESTDTC</span>,</span>
<span class="r-in">  new_vars_prefix <span class="op">=</span> <span class="st">"AEST"</span>,</span>
<span class="r-in">  highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span class="r-in">  flag_imputation <span class="op">=</span> <span class="st">"none"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ttae</span> <span class="op">&lt;-</span> <span class="fu"><a href="event_source.html">event_source</a></span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"ae"</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">AESTDT</span>,</span>
<span class="r-in">  set_values_to <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span></span>
<span class="r-in">    EVNTDESC <span class="op">=</span> <span class="st">"AE"</span>,</span>
<span class="r-in">    SRCDOM <span class="op">=</span> <span class="st">"AE"</span>,</span>
<span class="r-in">    SRCVAR <span class="op">=</span> <span class="st">"AESTDTC"</span>,</span>
<span class="r-in">    SRCSEQ <span class="op">=</span> <span class="va">AESEQ</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">eos</span> <span class="op">&lt;-</span> <span class="fu"><a href="censor_source.html">censor_source</a></span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">EOSDT</span>,</span>
<span class="r-in">  set_values_to <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span></span>
<span class="r-in">    EVNTDESC <span class="op">=</span> <span class="st">"END OF STUDY"</span>,</span>
<span class="r-in">    SRCDOM <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span class="r-in">    SRCVAR <span class="op">=</span> <span class="st">"EOSDT"</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">derive_param_tte</span><span class="op">(</span></span>
<span class="r-in">  dataset_adsl <span class="op">=</span> <span class="va">adsl</span>,</span>
<span class="r-in">  by_vars <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span>,</span>
<span class="r-in">  start_date <span class="op">=</span> <span class="va">TRTSDT</span>,</span>
<span class="r-in">  event_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ttae</span><span class="op">)</span>,</span>
<span class="r-in">  censor_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">eos</span><span class="op">)</span>,</span>
<span class="r-in">  source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adsl <span class="op">=</span> <span class="va">adsl</span>, ae <span class="op">=</span> <span class="va">ae_ext</span><span class="op">)</span>,</span>
<span class="r-in">  set_values_to <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span></span>
<span class="r-in">    PARAMCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"TTAE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">    PARAM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Time to First"</span>, <span class="va">AEDECOD</span>, <span class="st">"Adverse Event"</span><span class="op">)</span>,</span>
<span class="r-in">    PARCAT1 <span class="op">=</span> <span class="st">"TTAE"</span>,</span>
<span class="r-in">    PARCAT2 <span class="op">=</span> <span class="va">AEDECOD</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">STARTDT</span>, <span class="va">PARAMCD</span>, <span class="va">PARAM</span>, <span class="va">ADT</span>, <span class="va">CNSR</span>, <span class="va">SRCSEQ</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"># A tibble: 4 x 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID STARTDT    PARAMCD PARAM                       ADT         CNSR SRCSEQ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;date&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>                       </span><span style="color: #555555;font-style: italic;">&lt;date&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span>  </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">1</span><span> 01      2020-12-06 TTAE1   Time to First Cough Advers… 2021-03-04     0      2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">2</span><span> 01      2020-12-06 TTAE2   Time to First Flu Adverse … 2021-01-01     0      3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">3</span><span> 02      2021-01-16 TTAE1   Time to First Cough Advers… 2021-02-03     1     </span><span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">4</span><span> 02      2021-01-16 TTAE2   Time to First Flu Adverse … 2021-02-03     1     </span><span style="color: #BB0000;">NA</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Thomas Neitmann, Stefan Bundfuss, Ben Straub, Samia Kabi, Gordon Miller, Teckla Akinyi, Andrew Smith, Konstantina Koukourikou, Ross Farrugia, Eric Simms, Annie Yang, Robin Koeger, Sophie Shapcott, Ojesh Upadhyay, Jack McGavigan, Kamila Duniec, Gayatri G, Alana Harris, Mahdi About, Pooja Kumari, Claudia Carlucci, Daniil Stefonishin, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

