<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Adds a Variable Flagging the Maximal / Minimal Value Within a Group of Observations"><title>Adds a Variable Flagging the Maximal / Minimal Value Within a Group of Observations — derive_var_worst_flag • admiral</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adds a Variable Flagging the Maximal / Minimal Value Within a Group of Observations — derive_var_worst_flag"><meta property="og:description" content="Adds a Variable Flagging the Maximal / Minimal Value Within a Group of Observations"><meta property="og:image" content="https://pharmaverse.github.io/admiral/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">admiral</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/admiral.html">Get Started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-user-guides">User Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-user-guides">
    <h6 class="dropdown-header" data-toc-skip>Getting Started</h6>
    <a class="dropdown-item" href="../articles/adsl.html">Creating a basic ADSL</a>
    <a class="dropdown-item" href="../articles/faq.html">FAQ</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Deep Dives on ADaMs</h6>
    <a class="dropdown-item" href="../articles/occds.html">Creating an OCCDS ADaM</a>
    <a class="dropdown-item" href="../articles/bds_finding.html">Creating a BDS Findings ADAM</a>
    <a class="dropdown-item" href="../articles/bds_exposure.html">Creating a BDS Exposure ADaM</a>
    <a class="dropdown-item" href="../articles/bds_tte.html">Creating a BDS Time-to-Event ADaM</a>
    <h6 class="dropdown-header" data-toc-skip>Advanced User Guides</h6>
    <a class="dropdown-item" href="../articles/imputation.html">Date and Time Imputation</a>
    <a class="dropdown-item" href="../articles/higher_order.html">Higher Order Functions</a>
    <a class="dropdown-item" href="../articles/queries_dataset.html">Queries Dataset Documentation</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-community">Community</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-community">
    <a class="dropdown-item" href="../articles/contribution_model.html">Contribute to admiral</a>
    <a class="external-link dropdown-item" href="https://app.slack.com/client/T028PB489D3/C02M8KN8269">Find us on Slack</a>
    <a class="external-link dropdown-item" href="https://pharmaverse.org/">Welcome to the Pharmaverse</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" href="https://pharmaverse.github.io/admiral/"></a> </div></li>
<!-- end dropdown for versions -->
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Adds a Variable Flagging the Maximal / Minimal Value Within a Group of Observations</h1>
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiral/blob/main/R/derive_var_extreme_flag.R" class="external-link"><code>R/derive_var_extreme_flag.R</code></a></small>
      <div class="d-none name"><code>derive_var_worst_flag.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Adds a Variable Flagging the Maximal / Minimal Value Within a Group of Observations</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">derive_var_worst_flag</span><span class="op">(</span>
  <span class="va">dataset</span>,
  <span class="va">by_vars</span>,
  <span class="va">order</span>,
  <span class="va">new_var</span>,
  <span class="va">param_var</span>,
  <span class="va">analysis_var</span>,
  <span class="va">worst_high</span>,
  <span class="va">worst_low</span>,
  filter <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,
  check_type <span class="op">=</span> <span class="st">"warning"</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dataset</dt>
<dd><p>Input dataset.
Variables specified by <code>by_vars</code>, <code>order</code>, <code>param_var</code>, and <code>analysis_var</code> are expected.</p></dd>
<dt>by_vars</dt>
<dd><p>Grouping variables</p>
<p>Permitted Values: list of variables</p></dd>
<dt>order</dt>
<dd><p>Sort order.
Used to determine maximal / minimal observation if they are not unique,
see Details section for more information.</p></dd>
<dt>new_var</dt>
<dd><p>Variable to add to the <code>dataset</code>.
It is set <code>"Y"</code> for the maximal / minimal observation of each group,
see Details section for more information.</p></dd>
<dt>param_var</dt>
<dd><p>Variable with the parameter values for which the maximal / minimal
value is calculated.</p></dd>
<dt>analysis_var</dt>
<dd><p>Variable with the measurement values for which the maximal / minimal
value is calculated.</p></dd>
<dt>worst_high</dt>
<dd><p>Character with <code>param_var</code> values specifying the parameters
referring to "high".
Use <code>character(0)</code> if not required.</p></dd>
<dt>worst_low</dt>
<dd><p>Character with <code>param_var</code> values specifying the parameters
referring to "low".
Use <code>character(0)</code> if not required.</p></dd>
<dt>filter</dt>
<dd><p>Deprecated, please use <code><a href="restrict_derivation.html">restrict_derivation()</a></code> instead (see examples).</p></dd>
<dt>check_type</dt>
<dd><p>Check uniqueness?</p>
<p>If <code>"warning"</code> or <code>"error"</code> is specified, the specified message is issued
if the observations of the input dataset are not unique with respect to the
by variables and the order.</p>
<p>Default: <code>"warning"</code></p>
<p>Permitted Values: <code>"none"</code>, <code>"warning"</code>, <code>"error"</code></p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input dataset with the new flag variable added.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For each group with respect to the variables specified by the <code>by_vars</code> parameter,
the maximal / minimal observation of <code>analysis_var</code>
is labelled in the <code>new_var</code> column as <code>"Y"</code>,
if its <code>param_var</code> is in <code>worst_high</code> / <code>worst_low</code>.
Otherwise, it is assigned <code>NA</code>.
If there is more than one such maximal / minimal observation,
the first one with respect to the order specified by the <code>order</code> parameter is flagged. The
direction of "worst" depends on the definition of worst for a specified parameters in the
arguments <code>worst_high</code> / <code>worst_low</code>, i.e. for some parameters the highest value is the worst
and for others the worst is the lowest value.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="derive_var_extreme_flag.html">derive_var_extreme_flag()</a></code></p>
<p>General Derivation Functions for all ADaMs that returns variable appended to dataset:
<code><a href="derive_var_confirmation_flag.html">derive_var_confirmation_flag</a>()</code>,
<code><a href="derive_var_extreme_flag.html">derive_var_extreme_flag</a>()</code>,
<code><a href="derive_var_last_dose_amt.html">derive_var_last_dose_amt</a>()</code>,
<code><a href="derive_var_last_dose_date.html">derive_var_last_dose_date</a>()</code>,
<code><a href="derive_var_last_dose_grp.html">derive_var_last_dose_grp</a>()</code>,
<code><a href="derive_var_merged_cat.html">derive_var_merged_cat</a>()</code>,
<code><a href="derive_var_merged_character.html">derive_var_merged_character</a>()</code>,
<code><a href="derive_var_merged_exist_flag.html">derive_var_merged_exist_flag</a>()</code>,
<code><a href="derive_var_obs_number.html">derive_var_obs_number</a>()</code>,
<code><a href="derive_vars_last_dose.html">derive_vars_last_dose</a>()</code>,
<code><a href="derive_vars_merged_lookup.html">derive_vars_merged_lookup</a>()</code>,
<code><a href="derive_vars_merged.html">derive_vars_merged</a>()</code>,
<code><a href="derive_vars_transposed.html">derive_vars_transposed</a>()</code>,
<code><a href="get_summary_records.html">get_summary_records</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Ondrej Slama</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="op">~</span><span class="va">STUDYID</span>, <span class="op">~</span><span class="va">USUBJID</span>,  <span class="op">~</span><span class="va">PARAMCD</span>,     <span class="op">~</span><span class="va">AVISIT</span>,                  <span class="op">~</span><span class="va">ADT</span>, <span class="op">~</span><span class="va">AVAL</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM01"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM01"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-25"</span><span class="op">)</span>,  <span class="fl">14.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM01"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-23"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM01"</span>,    <span class="st">"WEEK 1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">10.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM01"</span>,    <span class="st">"WEEK 2"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-30"</span><span class="op">)</span>,  <span class="fl">12.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM01"</span>, <span class="st">"SCREENING"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM01"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-25"</span><span class="op">)</span>,  <span class="fl">14.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM01"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-23"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM01"</span>,    <span class="st">"WEEK 1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">10.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM01"</span>,    <span class="st">"WEEK 2"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-30"</span><span class="op">)</span>,  <span class="fl">12.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM02"</span>, <span class="st">"SCREENING"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM02"</span>, <span class="st">"SCREENING"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-25"</span><span class="op">)</span>,  <span class="fl">14.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM02"</span>, <span class="st">"SCREENING"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-23"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM02"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">10.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT01"</span>, <span class="st">"PARAM02"</span>,    <span class="st">"WEEK 2"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-30"</span><span class="op">)</span>,  <span class="fl">12.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM02"</span>, <span class="st">"SCREENING"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM02"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-25"</span><span class="op">)</span>,  <span class="fl">14.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM02"</span>,    <span class="st">"WEEK 1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-23"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM02"</span>,    <span class="st">"WEEK 1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">10.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM02"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-30"</span><span class="op">)</span>,  <span class="fl">12.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM03"</span>, <span class="st">"SCREENING"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM03"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-25"</span><span class="op">)</span>,  <span class="fl">14.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM03"</span>,    <span class="st">"WEEK 1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-23"</span><span class="op">)</span>,  <span class="fl">15.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM03"</span>,    <span class="st">"WEEK 1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-27"</span><span class="op">)</span>,  <span class="fl">10.0</span>,</span>
<span class="r-in">  <span class="st">"TEST01"</span>,  <span class="st">"PAT02"</span>, <span class="st">"PARAM03"</span>,  <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-04-30"</span><span class="op">)</span>,  <span class="fl">12.0</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">derive_var_worst_flag</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">input</span>,</span>
<span class="r-in">  by_vars <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">PARAMCD</span>, <span class="va">AVISIT</span><span class="op">)</span>,</span>
<span class="r-in">  order <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">ADT</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">  new_var <span class="op">=</span> <span class="va">WORSTFL</span>,</span>
<span class="r-in">  param_var <span class="op">=</span> <span class="va">PARAMCD</span>,</span>
<span class="r-in">  analysis_var <span class="op">=</span> <span class="va">AVAL</span>,</span>
<span class="r-in">  worst_high <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAM01"</span>, <span class="st">"PARAM03"</span><span class="op">)</span>,</span>
<span class="r-in">  worst_low <span class="op">=</span> <span class="st">"PARAM02"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"># A tibble: 25 x 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    STUDYID USUBJID PARAMCD AVISIT    ADT         AVAL WORSTFL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;date&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>  </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1</span><span> TEST01  PAT01   PARAM02 BASELINE  2021-04-27    10 Y      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 2</span><span> TEST01  PAT01   PARAM02 SCREENING 2021-04-25    14 Y      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 3</span><span> TEST01  PAT01   PARAM02 SCREENING 2021-04-27    15 </span><span style="color: #BB0000;">NA</span><span>     </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 4</span><span> TEST01  PAT01   PARAM02 SCREENING 2021-04-23    15 </span><span style="color: #BB0000;">NA</span><span>     </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 5</span><span> TEST01  PAT01   PARAM02 WEEK 2    2021-04-30    12 Y      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 6</span><span> TEST01  PAT02   PARAM02 BASELINE  2021-04-30    12 Y      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 7</span><span> TEST01  PAT02   PARAM02 BASELINE  2021-04-25    14 </span><span style="color: #BB0000;">NA</span><span>     </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 8</span><span> TEST01  PAT02   PARAM02 SCREENING 2021-04-27    15 Y      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 9</span><span> TEST01  PAT02   PARAM02 WEEK 1    2021-04-27    10 Y      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">10</span><span> TEST01  PAT02   PARAM02 WEEK 1    2021-04-23    15 </span><span style="color: #BB0000;">NA</span><span>     </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"># … with 15 more rows</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># example with ADVS</span></span>
<span class="r-in"><span class="fu"><a href="restrict_derivation.html">restrict_derivation</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="va">advs</span>,</span>
<span class="r-in">  derivation <span class="op">=</span> <span class="va">derive_var_worst_flag</span>,</span>
<span class="r-in">  args <span class="op">=</span> <span class="fu"><a href="params.html">params</a></span><span class="op">(</span></span>
<span class="r-in">    by_vars <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">PARAMCD</span>, <span class="va">AVISIT</span><span class="op">)</span>,</span>
<span class="r-in">    order <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">ADT</span>, <span class="va">ATPTN</span><span class="op">)</span>,</span>
<span class="r-in">    new_var <span class="op">=</span> <span class="va">WORSTFL</span>,</span>
<span class="r-in">    param_var <span class="op">=</span> <span class="va">PARAMCD</span>,</span>
<span class="r-in">    analysis_var <span class="op">=</span> <span class="va">AVAL</span>,</span>
<span class="r-in">    worst_high <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SYSBP"</span>, <span class="st">"DIABP"</span><span class="op">)</span>,</span>
<span class="r-in">    worst_low <span class="op">=</span> <span class="st">"RESP"</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Thomas Neitmann, Stefan Bundfuss, Ben Straub, Samia Kabi, Gordon Miller, Teckla Akinyi, Andrew Smith, Konstantina Koukourikou, Ross Farrugia, Eric Simms, Annie Yang, Robin Koeger, Sophie Shapcott, Ojesh Upadhyay, Jack McGavigan, Kamila Duniec, Gayatri G, Alana Harris, Mahdi About, Pooja Kumari, Claudia Carlucci, Daniil Stefonishin, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

