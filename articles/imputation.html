<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Date and Time Imputation • admiral</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Date and Time Imputation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">admiral</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-get-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Get Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-get-started">
<li><a class="dropdown-item" href="../articles/admiral.html">Get Started</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/pharmaverse/admiral/blob/main/inst/cheatsheet/admiral_cheatsheet.pdf">Cheatsheet</a></li>
    <li><a class="dropdown-item" href="https://pharmaverse.github.io/admiraldiscovery/articles/presentation_archive.html">Presentation Archive</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-user-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">User Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-user-guides">
<li><h6 class="dropdown-header" data-toc-skip>General Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/concepts_conventions.html">Programming Concepts and Conventions</a></li>
    <li><a class="dropdown-item" href="../articles/generic.html">Generic Derivations</a></li>
    <li><a class="dropdown-item" href="../articles/higher_order.html">Higher Order Functions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>ADaM Script Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/adsl.html">Creating a Basic ADSL</a></li>
    <li><a class="dropdown-item" href="../articles/occds.html">Creating an OCCDS ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_finding.html">Creating a BDS Findings ADAM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_exposure.html">Creating a BDS Exposure ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/bds_tte.html">Creating a BDS Time-to-Event ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/questionnaires.html">Creating Questionnaire ADaMs</a></li>
    <li><a class="dropdown-item" href="../articles/pk_adnca.html">Creating a PK NCA or Population PK ADaM</a></li>
    <li><a class="dropdown-item" href="../articles/hys_law.html">Hy's Law Implementation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Special Topics Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/imputation.html">Date and Time Imputation</a></li>
    <li><a class="dropdown-item" href="../articles/visits_periods.html">Visit and Period Variables</a></li>
    <li><a class="dropdown-item" href="../articles/queries_dataset.html">Queries Dataset Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/lab_grading.html">Lab Grading</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="https://pharmaverse.github.io/admiraldiscovery/articles/reactable.html">🔎 Find my function</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://pharmaverse.slack.com/" aria-label="Slack"><span class="fa fa-slack"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/website-versions.html" aria-label="Previous Release Websites"><span class="fa fa-history"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/issues/new/choose" aria-label="New Issue"><span class="fa fa-bug"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="imputation_files/dt-scroll-1.0.0/style.css" rel="stylesheet">
<script src="imputation_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="imputation_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="imputation_files/datatables-binding-0.33/datatables.js"></script><link href="imputation_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="imputation_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="imputation_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="imputation_files/dt-ext-buttons-1.13.6/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="imputation_files/dt-ext-buttons-1.13.6/js/dataTables.buttons.min.js"></script><script src="imputation_files/dt-ext-buttons-1.13.6/js/buttons.html5.min.js"></script><script src="imputation_files/dt-ext-buttons-1.13.6/js/buttons.colVis.min.js"></script><script src="imputation_files/dt-ext-buttons-1.13.6/js/buttons.print.min.js"></script><link href="imputation_files/dt-ext-colreorder-1.13.6/css/colReorder.dataTables.min.css" rel="stylesheet">
<script src="imputation_files/dt-ext-colreorder-1.13.6/js/dataTables.colReorder.min.js"></script><link href="imputation_files/dt-ext-scroller-1.13.6/css/scroller.dataTables.min.css" rel="stylesheet">
<script src="imputation_files/dt-ext-scroller-1.13.6/js/dataTables.scroller.min.js"></script><link href="imputation_files/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="imputation_files/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="imputation_files/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="imputation_files/selectize-0.12.0/selectize.min.js"></script><link href="imputation_files/dt-plugin-searchhighlight-1.13.6/source.css" rel="stylesheet">
<script src="imputation_files/dt-plugin-searchhighlight-1.13.6/jquery.highlight.js"></script><script src="imputation_files/dt-plugin-searchhighlight-1.13.6/source.min.js"></script><link href="imputation_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="imputation_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Date and Time Imputation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiral/blob/main/vignettes/imputation.Rmd" class="external-link"><code>vignettes/imputation.Rmd</code></a></small>
      <div class="d-none name"><code>imputation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette is broken into three major sections. The first section
briefly explores the imputation rules used in <a href="https://pharmaverse.github.io/admiral/">admiral</a>.
The second section focuses on imputation functions that work on vectors
with lots of small examples to explore the imputation rules. These
<strong>vector-based</strong> functions form the backbone of
<a href="https://pharmaverse.github.io/admiral/">admiral</a>’s more powerful functions
<code><a href="../reference/derive_vars_dt.html">derive_vars_dt()</a></code> and <code><a href="../reference/derive_vars_dtm.html">derive_vars_dtm()</a></code> for
building ADaM dataset. The final section moves into more detailed
examples that a user might face while working on ADaMs in need of
<code>---DT</code> and <code>---DTM</code> variables.</p>
<div class="section level3">
<h3 id="required-packages">Required Packages<a class="anchor" aria-label="anchor" href="#required-packages"></a>
</h3>
<p>The examples of this vignette require the following packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/admiral/">admiral</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="imputation-rules">Imputation Rules<a class="anchor" aria-label="anchor" href="#imputation-rules"></a>
</h2>
<p>Date and time is collected in SDTM as character values using the
extended <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">ISO 8601</a>
format. For example, <code>"2019-10-9T13:42:00"</code>. It allows that
some parts of the date or time are missing, e.g., <code>"2019-10"</code>
if the day and the time is unknown.</p>
<p>The ADaM timing variables like <code>ADTM</code> (Analysis Datetime)
or <code>ADY</code> (Analysis Relative Day) are numeric variables. They
can be derived only if the date or datetime is complete. Therefore
<a href="https://pharmaverse.github.io/admiral/">admiral</a> provides imputation functions which fill in
missing date or time parts according to certain imputation rules.</p>
<p>In <a href="https://pharmaverse.github.io/admiral/">admiral</a> users will primarily use two functions
<code><a href="../reference/derive_vars_dt.html">derive_vars_dt()</a></code> and <code><a href="../reference/derive_vars_dtm.html">derive_vars_dtm()</a></code> for
date and datetime imputations respectively. In all other functions where
dates can be passed as an argument, we expect full dates or datetimes
(unless otherwise specified), so if any possibility of partials then
these functions should be used as a first step to make the required
imputation.</p>
<p>The functions that need to do date/time imputation follow a rule that
we have called <strong>Highest Imputation</strong>, which has a
corresponding argument in all our functions called
<code>highest_imputation</code>. The rule is best explained by working
through the examples below, but to put it briefly, this rule allows a
user to control which components of the DTC value are imputed if they
are missing.</p>
<p>The default imputation for <code>_dtm()</code> functions,
e.g. <code><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm()</a></code>, <code><a href="../reference/derive_vars_dtm.html">derive_vars_dtm()</a></code>, is
“h” (hours). A user can specify that that no imputation is to be done by
setting <code>highest_imputation = n</code>. However, for for
<code>_dt()</code> functions, e.g. <code><a href="../reference/impute_dtc_dt.html">impute_dtc_dt()</a></code>,
<code><a href="../reference/derive_vars_dt.html">derive_vars_dt()</a></code> the default imputation is already set as
<code>highest_imputation = "n"</code>.</p>
<p>Care must be taken when deciding on level of imputation. If a
component is at a higher level than the highest imputation level is
missing, <code>NA_character_</code> is returned. For example, for
<code>highest_imputation = "D"</code> <code>"2020"</code> results in
<code>NA_character_</code> because the month is missing.</p>
<p>We encourage readers to explore in more detail the
<code>highest_imputation</code> options in both the <code>_dtm()</code>
and <code>_dt()</code> function documentations and in the examples
below.</p>
<div class="section level3">
<h3 id="imputation-on-a-vector">Imputation on a Vector<a class="anchor" aria-label="anchor" href="#imputation-on-a-vector"></a>
</h3>
<p>In our first example, we will make use of
<code><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm()</a></code> on <code>2019-10</code> setting
<code>highest_imputation = "M"</code>. The argument
<code>date_imputation</code> and <code>time_imputation</code> are given
expressed inputs of the imputation we would like to see done.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="st">"2019-10"</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  date_imputation <span class="op">=</span> <span class="st">"01-01"</span>,</span>
<span>  time_imputation <span class="op">=</span> <span class="st">"00:00:00"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-10-01T00:00:00"</span></span></code></pre></div>
<p>Next we impute using <code>2019-02</code>, which if done naively can
result in invalid dates, e.g.,</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="st">"2019-02"</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  date_imputation <span class="op">=</span> <span class="st">"02-31"</span>,</span>
<span>  time_imputation <span class="op">=</span> <span class="st">"00:00:00"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-31T00:00:00"</span></span></code></pre></div>
<p>Therefore the keywords <code>"first"</code> or <code>"last"</code>
can be specified in <code>date_imputation</code> to request that missing
parts are replaced by the first or last possible value - giving us a
valid date!</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="st">"2019-02"</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  date_imputation <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  time_imputation <span class="op">=</span> <span class="st">"00:00:00"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-28T00:00:00"</span></span></code></pre></div>
<p>For dates, there is the additional option to use keyword
<code>"mid"</code> to impute missing day to <code>15</code> or missing
day and month to <code>06-30</code>, but note the different behavior
below depending on the <code>preserve</code> argument for the case when
month only is missing:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"2019-02"</span>,</span>
<span>  <span class="st">"2019"</span>,</span>
<span>  <span class="st">"2019---01"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  date_imputation <span class="op">=</span> <span class="st">"mid"</span>,</span>
<span>  time_imputation <span class="op">=</span> <span class="st">"00:00:00"</span>,</span>
<span>  preserve <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-15T00:00:00" "2019-06-30T00:00:00" "2019-06-30T00:00:00"</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  date_imputation <span class="op">=</span> <span class="st">"mid"</span>,</span>
<span>  time_imputation <span class="op">=</span> <span class="st">"00:00:00"</span>,</span>
<span>  preserve <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-15T00:00:00" "2019-06-30T00:00:00" "2019-06-01T00:00:00"</span></span></code></pre></div>
<p>If you wanted to achieve a similar result by replacing any missing
part of the date with a fixed value <code>06-15</code>, this is also
possible, but note the difference in days for cases when month is
missing:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"2019-02"</span>,</span>
<span>  <span class="st">"2019"</span>,</span>
<span>  <span class="st">"2019---01"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  date_imputation <span class="op">=</span> <span class="st">"06-15"</span>,</span>
<span>  time_imputation <span class="op">=</span> <span class="st">"00:00:00"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-15T00:00:00" "2019-06-15T00:00:00" "2019-06-15T00:00:00"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="imputation-level">Imputation Level<a class="anchor" aria-label="anchor" href="#imputation-level"></a>
</h3>
<p>The imputation level, i.e., which components are imputed if they are
missing, is controlled by the <code>highest_imputation</code> argument.
All components up to the specified level are imputed.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"2019-02-03T12:30:15"</span>,</span>
<span>  <span class="st">"2019-02-03T12:30"</span>,</span>
<span>  <span class="st">"2019-02-03"</span>,</span>
<span>  <span class="st">"2019-02"</span>,</span>
<span>  <span class="st">"2019"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Do not impute</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"n"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-03T12:30:15" NA                    NA                   </span></span>
<span><span class="co">#&gt; [4] NA                    NA</span></span>
<span></span>
<span><span class="co"># Impute seconds only</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"s"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-03T12:30:15" "2019-02-03T12:30:00" NA                   </span></span>
<span><span class="co">#&gt; [4] NA                    NA</span></span>
<span></span>
<span><span class="co"># Impute time (hours, minutes, seconds) only</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"h"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-03T12:30:15" "2019-02-03T12:30:00" "2019-02-03T00:00:00"</span></span>
<span><span class="co">#&gt; [4] NA                    NA</span></span>
<span></span>
<span><span class="co"># Impute days and time</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"D"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-03T12:30:15" "2019-02-03T12:30:00" "2019-02-03T00:00:00"</span></span>
<span><span class="co">#&gt; [4] "2019-02-01T00:00:00" NA</span></span>
<span></span>
<span><span class="co"># Impute date (months and days) and time</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"M"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-03T12:30:15" "2019-02-03T12:30:00" "2019-02-03T00:00:00"</span></span>
<span><span class="co">#&gt; [4] "2019-02-01T00:00:00" "2019-01-01T00:00:00"</span></span></code></pre></div>
<p>For imputation of years (<code>highest_imputation = "Y"</code>) see
next section.</p>
</div>
<div class="section level3">
<h3 id="minimummaximum-dates">Minimum/Maximum Dates<a class="anchor" aria-label="anchor" href="#minimummaximum-dates"></a>
</h3>
<p>In some scenarios the imputed date should not be before or after
certain dates. For example an imputed date after data cut off date or
death date is not desirable. The <a href="https://pharmaverse.github.io/admiral/">admiral</a> imputation
functions provide the <code>min_dates</code> and <code>max_dates</code>
argument to specify those dates. For example:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="st">"2019-02"</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  date_imputation <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  time_imputation <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  max_dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-01-14"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-02-25"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-25T23:59:59"</span></span></code></pre></div>
<p>It is ensured that the imputed date is not after any of the specified
dates. Only dates which are in the range of possible dates of the DTC
value are considered. The possible dates are defined by the missing
parts of the DTC date, i.e., for “2019-02” the possible dates range from
“2019-02-01” to “2019-02-28”. Thus “2019-01-14” is ignored. This ensures
that the non-missing parts of the DTC date are not changed.</p>
<p>If the <code>min_dates</code> or <code>max_dates</code> argument is
specified, it is also possible to impute completely missing dates. For
<code>date_imputation = "first"</code> the <code>min_dates</code>
argument must be specified and for <code>date_imputation = "last"</code>
the <code>max_dates</code> argument. For other imputation rules imputing
the year is not possible.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Impute year to first</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2019-02"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>  min_dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-01-14"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-02-25"</span>, <span class="st">"2020-01-01"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-25T00:00:00" "2020-01-01T00:00:00"</span></span>
<span></span>
<span><span class="co"># Impute year to last</span></span>
<span><span class="fu"><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2019-02"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  highest_imputation <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>  date_imputation <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  time_imputation <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  max_dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-01-14"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-02-25"</span>, <span class="st">"2020-01-01"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-25T23:59:59" "2020-01-01T23:59:59"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="imputation-flags">Imputation Flags<a class="anchor" aria-label="anchor" href="#imputation-flags"></a>
</h2>
<p>ADaM requires that date or datetime variables for which imputation
was used are accompanied by date and/or time imputation flag variables
(<code>*DTF</code> and <code>*TMF</code>, e.g., <code>ADTF</code> and
<code>ATMF</code> for <code>ADTM</code>). These variables indicate the
highest level that was imputed, e.g., if minutes and seconds were
imputed, the imputation flag is set to <code>"M"</code>. The
<a href="https://pharmaverse.github.io/admiral/">admiral</a> functions which derive imputed variables are also
adding the corresponding imputation flag variables.</p>
<p>Note: The <a href="https://pharmaverse.github.io/admiral/">admiral</a> datetime imputation function
provides the <code>ignore_seconds_flag</code> argument which can be set
to <code>TRUE</code> in cases where seconds were never collected. This
is due to the following from ADaM IG: For a given SDTM DTC variable, if
only hours and minutes are ever collected, and seconds are imputed in
<code>*DTM</code> as <code>00</code>, then it is not necessary to set
<code>*TMF</code> to <code>"S"</code>.</p>
</div>
<div class="section level2">
<h2 id="imputation-functions">Imputation Functions<a class="anchor" aria-label="anchor" href="#imputation-functions"></a>
</h2>
<p><a href="https://pharmaverse.github.io/admiral/">admiral</a> provides the following functions for
imputation:</p>
<ul>
<li>
<code><a href="../reference/derive_vars_dt.html">derive_vars_dt()</a></code>: Adds a date variable and a date
imputation flag variable (optional) based on a –DTC variable and
imputation rules.</li>
<li>
<code><a href="../reference/derive_vars_dtm.html">derive_vars_dtm()</a></code>: Adds a datetime variable, a date
imputation flag variable, and a time imputation flag variable (both
optional) based on a –DTC variable and imputation rules.</li>
<li>
<code><a href="../reference/impute_dtc_dtm.html">impute_dtc_dtm()</a></code>: Returns a complete ISO 8601 datetime
or <code>NA</code> based on a partial ISO 8601 datetime and imputation
rules.</li>
<li>
<code><a href="../reference/impute_dtc_dt.html">impute_dtc_dt()</a></code>: Returns a complete ISO 8601 date
(without time) or <code>NA</code> based on a partial ISO 8601 date(time)
and imputation rules.</li>
<li>
<code><a href="../reference/convert_dtc_to_dt.html">convert_dtc_to_dt()</a></code>: Returns a date if the input ISO
8601 date is complete. Otherwise, <code>NA</code> is returned.</li>
<li>
<code><a href="../reference/convert_dtc_to_dtm.html">convert_dtc_to_dtm()</a></code>: Returns a datetime if the input
ISO 8601 date is complete (with missing time replaced by
<code>"00:00:00"</code> as default). Otherwise, NA is returned.</li>
<li>
<code><a href="../reference/compute_dtf.html">compute_dtf()</a></code>: Returns the date imputation flag.</li>
<li>
<code><a href="../reference/compute_tmf.html">compute_tmf()</a></code>: Returns the time imputation flag.</li>
</ul>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="create-an-imputed-datetime-and-date-variable-and-imputation-flag-variables">Create an Imputed Datetime and Date Variable and Imputation Flag
Variables<a class="anchor" aria-label="anchor" href="#create-an-imputed-datetime-and-date-variable-and-imputation-flag-variables"></a>
</h3>
<p>The <code><a href="../reference/derive_vars_dtm.html">derive_vars_dtm()</a></code> function derives an imputed
datetime variable and the corresponding date and time imputation flags.
The imputed date variable can be derived by using the
<code><a href="../reference/derive_vars_dtm_to_dt.html">derive_vars_dtm_to_dt()</a></code> function. It is not necessary and
advisable to perform the imputation for the date variable if it was
already done for the datetime variable. CDISC considers the datetime and
the date variable as two representations of the same date. Thus the
imputation must be the same and the imputation flags are valid for both
the datetime and the date variable.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">AESTDTC</span>,</span>
<span>  <span class="st">"2019-08-09T12:34:56"</span>,</span>
<span>  <span class="st">"2019-04-12"</span>,</span>
<span>  <span class="st">"2010-09"</span>,</span>
<span>  <span class="cn">NA_character_</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/derive_vars_dtm.html">derive_vars_dtm</a></span><span class="op">(</span></span>
<span>    dtc <span class="op">=</span> <span class="va">AESTDTC</span>,</span>
<span>    new_vars_prefix <span class="op">=</span> <span class="st">"AST"</span>,</span>
<span>    highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>    date_imputation <span class="op">=</span> <span class="st">"first"</span>,</span>
<span>    time_imputation <span class="op">=</span> <span class="st">"first"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/derive_vars_dtm_to_dt.html">derive_vars_dtm_to_dt</a></span><span class="op">(</span><span class="fu"><a href="../reference/reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">ASTDTM</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;2010-09&quot;,&quot;2019-04-12&quot;,&quot;2019-08-09T12:34:56&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"time\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1283299200000\" data-max=\"1565354096000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;D&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;H&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1283299200000\" data-max=\"1565308800000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["2019-08-09T12:34:56","2019-04-12","2010-09",null],["2019-08-09T12:34:56Z","2019-04-12T00:00:00Z","2010-09-01T00:00:00Z",null],[null,null,"D",null],[null,"H","H",null],["2019-08-09","2019-04-12","2010-09-01",null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>AESTDTC<\/th>\n      <th>ASTDTM<\/th>\n      <th>ASTDTF<\/th>\n      <th>ASTTMF<\/th>\n      <th>ASTDT<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"name":"AESTDTC","targets":0},{"name":"ASTDTM","targets":1},{"name":"ASTDTF","targets":2},{"name":"ASTTMF","targets":3},{"name":"ASTDT","targets":4}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="create-an-imputed-date-variable-and-imputation-flag-variable">Create an Imputed Date Variable and Imputation Flag Variable<a class="anchor" aria-label="anchor" href="#create-an-imputed-date-variable-and-imputation-flag-variable"></a>
</h3>
<p>If an imputed date variable without a corresponding datetime variable
is required, it can be derived by the <code><a href="../reference/derive_vars_dt.html">derive_vars_dt()</a></code>
function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">AESTDTC</span>,</span>
<span>  <span class="st">"2019-08-09T12:34:56"</span>,</span>
<span>  <span class="st">"2019-04-12"</span>,</span>
<span>  <span class="st">"2010-09"</span>,</span>
<span>  <span class="cn">NA_character_</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/derive_vars_dt.html">derive_vars_dt</a></span><span class="op">(</span></span>
<span>    dtc <span class="op">=</span> <span class="va">AESTDTC</span>,</span>
<span>    new_vars_prefix <span class="op">=</span> <span class="st">"AST"</span>,</span>
<span>    highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>    date_imputation <span class="op">=</span> <span class="st">"first"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-e5c8c404fe174e4c81bd" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;2010-09&quot;,&quot;2019-04-12&quot;,&quot;2019-08-09T12:34:56&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1283299200000\" data-max=\"1565308800000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;D&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["2019-08-09T12:34:56","2019-04-12","2010-09",null],["2019-08-09","2019-04-12","2010-09-01",null],[null,null,"D",null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>AESTDTC<\/th>\n      <th>ASTDT<\/th>\n      <th>ASTDTF<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"name":"AESTDTC","targets":0},{"name":"ASTDT","targets":1},{"name":"ASTDTF","targets":2}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="impute-time-without-imputing-date">Impute Time without Imputing Date<a class="anchor" aria-label="anchor" href="#impute-time-without-imputing-date"></a>
</h3>
<p>If the time should be imputed but not the date, the
<code>highest_imputation</code> argument should be set to
<code>"h"</code>. This results in <code>NA</code> if the date is
partial. As no date is imputed the date imputation flag is not
created.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">AESTDTC</span>,</span>
<span>  <span class="st">"2019-08-09T12:34:56"</span>,</span>
<span>  <span class="st">"2019-04-12"</span>,</span>
<span>  <span class="st">"2010-09"</span>,</span>
<span>  <span class="cn">NA_character_</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/derive_vars_dtm.html">derive_vars_dtm</a></span><span class="op">(</span></span>
<span>    dtc <span class="op">=</span> <span class="va">AESTDTC</span>,</span>
<span>    new_vars_prefix <span class="op">=</span> <span class="st">"AST"</span>,</span>
<span>    highest_imputation <span class="op">=</span> <span class="st">"h"</span>,</span>
<span>    time_imputation <span class="op">=</span> <span class="st">"first"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-36aa3d2a04d42bbc2145" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;2010-09&quot;,&quot;2019-04-12&quot;,&quot;2019-08-09T12:34:56&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"time\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1555027200000\" data-max=\"1565354096000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;H&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["2019-08-09T12:34:56","2019-04-12","2010-09",null],["2019-08-09T12:34:56Z","2019-04-12T00:00:00Z",null,null],[null,"H",null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>AESTDTC<\/th>\n      <th>ASTDTM<\/th>\n      <th>ASTTMF<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"name":"AESTDTC","targets":0},{"name":"ASTDTM","targets":1},{"name":"ASTTMF","targets":2}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="avoid-imputed-dates-before-a-particular-date">Avoid Imputed Dates Before a Particular Date<a class="anchor" aria-label="anchor" href="#avoid-imputed-dates-before-a-particular-date"></a>
</h3>
<p>Usually the adverse event start date is imputed as the earliest date
of all possible dates when filling the missing parts. The result may be
a date before treatment start date. This is not desirable because the
adverse event would not be considered as treatment emergent and excluded
from the adverse event summaries. This can be avoided by specifying the
treatment start date variable (<code>TRTSDTM</code>) for the
<code>min_dates</code> argument.</p>
<p>Please note that <code>TRTSDTM</code> is used as imputed date only if
the non missing date and time parts of <code>AESTDTC</code> coincide
with those of <code>TRTSDTM</code>. Therefore <code>2019-10</code> is
not imputed as <code>2019-11-11 12:34:56</code>. This ensures that
collected information is not changed by the imputation.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">AESTDTC</span>,              <span class="op">~</span><span class="va">TRTSDTM</span>,</span>
<span>  <span class="st">"2019-08-09T12:34:56"</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="st">"2019-11-11T12:34:56"</span><span class="op">)</span>,</span>
<span>  <span class="st">"2019-10"</span>,             <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="st">"2019-11-11T12:34:56"</span><span class="op">)</span>,</span>
<span>  <span class="st">"2019-11"</span>,             <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="st">"2019-11-11T12:34:56"</span><span class="op">)</span>,</span>
<span>  <span class="st">"2019-12-04"</span>,          <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="st">"2019-11-11T12:34:56"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/derive_vars_dtm.html">derive_vars_dtm</a></span><span class="op">(</span></span>
<span>    dtc <span class="op">=</span> <span class="va">AESTDTC</span>,</span>
<span>    new_vars_prefix <span class="op">=</span> <span class="st">"AST"</span>,</span>
<span>    highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>    date_imputation <span class="op">=</span> <span class="st">"first"</span>,</span>
<span>    time_imputation <span class="op">=</span> <span class="st">"first"</span>,</span>
<span>    min_dates <span class="op">=</span> <span class="fu"><a href="../reference/reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">TRTSDTM</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-febe03efa1a2d8d52a86" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;2019-08-09T12:34:56&quot;,&quot;2019-10&quot;,&quot;2019-11&quot;,&quot;2019-12-04&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"time\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"time\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1565354096000\" data-max=\"1575417600000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;D&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;H&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["2019-08-09T12:34:56","2019-10","2019-11","2019-12-04"],["2019-11-11T12:34:56Z","2019-11-11T12:34:56Z","2019-11-11T12:34:56Z","2019-11-11T12:34:56Z"],["2019-08-09T12:34:56Z","2019-10-01T00:00:00Z","2019-11-11T12:34:56Z","2019-12-04T00:00:00Z"],[null,"D","D",null],[null,"H","H","H"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>AESTDTC<\/th>\n      <th>TRTSDTM<\/th>\n      <th>ASTDTM<\/th>\n      <th>ASTDTF<\/th>\n      <th>ASTTMF<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"name":"AESTDTC","targets":0},{"name":"TRTSDTM","targets":1},{"name":"ASTDTM","targets":2},{"name":"ASTDTF","targets":3},{"name":"ASTTMF","targets":4}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="avoid-imputed-dates-after-a-particular-date">Avoid Imputed Dates After a Particular Date<a class="anchor" aria-label="anchor" href="#avoid-imputed-dates-after-a-particular-date"></a>
</h3>
<p>If a date is imputed as the latest date of all possible dates when
filling the missing parts, it should not result in dates after data cut
off or death. This can be achieved by specifying the dates for the
<code>max_dates</code> argument.</p>
<p>Please note that non missing date parts are not changed. Thus
<code>2019-12-04</code> is imputed as <code>2019-12-04 23:59:59</code>
although it is after the data cut off date. It may make sense to replace
it by the data cut off date but this is not part of the imputation. It
should be done in a separate data cleaning or data cut off step.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">AEENDTC</span>,              <span class="op">~</span><span class="va">DTHDT</span>,            <span class="op">~</span><span class="va">DCUTDT</span>,</span>
<span>  <span class="st">"2019-08-09T12:34:56"</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-11-11"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-12-02"</span><span class="op">)</span>,</span>
<span>  <span class="st">"2019-11"</span>,             <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-11-11"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-12-02"</span><span class="op">)</span>,</span>
<span>  <span class="st">"2019-12"</span>,             <span class="cn">NA</span>,                <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-12-02"</span><span class="op">)</span>,</span>
<span>  <span class="st">"2019-12-04"</span>,          <span class="cn">NA</span>,                <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-12-02"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/derive_vars_dtm.html">derive_vars_dtm</a></span><span class="op">(</span></span>
<span>    dtc <span class="op">=</span> <span class="va">AEENDTC</span>,</span>
<span>    new_vars_prefix <span class="op">=</span> <span class="st">"AEN"</span>,</span>
<span>    highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>    date_imputation <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>    time_imputation <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>    max_dates <span class="op">=</span> <span class="fu"><a href="../reference/reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">DTHDT</span>, <span class="va">DCUTDT</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-1fb4450895fe099f74a1" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;2019-08-09T12:34:56&quot;,&quot;2019-11&quot;,&quot;2019-12&quot;,&quot;2019-12-04&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"time\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1565354096000\" data-max=\"1575503999000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;D&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;H&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["2019-08-09T12:34:56","2019-11","2019-12","2019-12-04"],["2019-11-11","2019-11-11",null,null],["2019-12-02","2019-12-02","2019-12-02","2019-12-02"],["2019-08-09T12:34:56Z","2019-11-11T23:59:59Z","2019-12-02T23:59:59Z","2019-12-04T23:59:59Z"],[null,"D","D",null],[null,"H","H","H"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>AEENDTC<\/th>\n      <th>DTHDT<\/th>\n      <th>DCUTDT<\/th>\n      <th>AENDTM<\/th>\n      <th>AENDTF<\/th>\n      <th>AENTMF<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"name":"AEENDTC","targets":0},{"name":"DTHDT","targets":1},{"name":"DCUTDT","targets":2},{"name":"AENDTM","targets":3},{"name":"AENDTF","targets":4},{"name":"AENTMF","targets":5}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="imputation-without-creating-a-new-variable">Imputation Without Creating a New Variable<a class="anchor" aria-label="anchor" href="#imputation-without-creating-a-new-variable"></a>
</h3>
<p>If imputation is required without creating a new variable the
<code><a href="../reference/convert_dtc_to_dt.html">convert_dtc_to_dt()</a></code> function can be called to obtain a
vector of imputed dates. It can be used for example in conditions:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mh</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">MHSTDTC</span>,     <span class="op">~</span><span class="va">TRTSDT</span>,</span>
<span>  <span class="st">"2019-04"</span>,    <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-04-15"</span><span class="op">)</span>,</span>
<span>  <span class="st">"2019-04-01"</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-04-15"</span><span class="op">)</span>,</span>
<span>  <span class="st">"2019-05"</span>,    <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-04-15"</span><span class="op">)</span>,</span>
<span>  <span class="st">"2019-06-21"</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="st">"2019-04-15"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/convert_dtc_to_dt.html">convert_dtc_to_dt</a></span><span class="op">(</span></span>
<span>      <span class="va">MHSTDTC</span>,</span>
<span>      highest_imputation <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>      date_imputation <span class="op">=</span> <span class="st">"first"</span></span>
<span>    <span class="op">)</span> <span class="op">&lt;</span> <span class="va">TRTSDT</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-10b3b7155e8045a1b2ad" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-10b3b7155e8045a1b2ad">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;2019-04&quot;,&quot;2019-04-01&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["2019-04","2019-04-01"],["2019-04-15","2019-04-15"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>MHSTDTC<\/th>\n      <th>TRTSDT<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"name":"MHSTDTC","targets":0},{"name":"TRTSDT","targets":1}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="using-more-than-one-imputation-rule-for-a-variable">Using More Than One Imputation Rule for a Variable<a class="anchor" aria-label="anchor" href="#using-more-than-one-imputation-rule-for-a-variable"></a>
</h3>
<p>Using different imputation rules depending on the observation can be
done by using <code><a href="../reference/slice_derivation.html">slice_derivation()</a></code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">VSDTC</span>,                <span class="op">~</span><span class="va">VSTPT</span>,</span>
<span>  <span class="st">"2019-08-09T12:34:56"</span>, <span class="cn">NA</span>,</span>
<span>  <span class="st">"2019-10-12"</span>,          <span class="st">"PRE-DOSE"</span>,</span>
<span>  <span class="st">"2019-11-10"</span>,          <span class="cn">NA</span>,</span>
<span>  <span class="st">"2019-12-04"</span>,          <span class="cn">NA</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/slice_derivation.html">slice_derivation</a></span><span class="op">(</span></span>
<span>    derivation <span class="op">=</span> <span class="va">derive_vars_dtm</span>,</span>
<span>    args <span class="op">=</span> <span class="fu"><a href="../reference/params.html">params</a></span><span class="op">(</span></span>
<span>      dtc <span class="op">=</span> <span class="va">VSDTC</span>,</span>
<span>      new_vars_prefix <span class="op">=</span> <span class="st">"A"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/derivation_slice.html">derivation_slice</a></span><span class="op">(</span></span>
<span>      filter <span class="op">=</span> <span class="va">VSTPT</span> <span class="op">==</span> <span class="st">"PRE-DOSE"</span>,</span>
<span>      args <span class="op">=</span> <span class="fu"><a href="../reference/params.html">params</a></span><span class="op">(</span>time_imputation <span class="op">=</span> <span class="st">"first"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/derivation_slice.html">derivation_slice</a></span><span class="op">(</span></span>
<span>      filter <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      args <span class="op">=</span> <span class="fu"><a href="../reference/params.html">params</a></span><span class="op">(</span>time_imputation <span class="op">=</span> <span class="st">"last"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-4018eef1a407a0df6b52" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4018eef1a407a0df6b52">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;2019-08-09T12:34:56&quot;,&quot;2019-10-12&quot;,&quot;2019-11-10&quot;,&quot;2019-12-04&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;PRE-DOSE&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"time\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1565354096000\" data-max=\"1575503999000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;H&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["2019-08-09T12:34:56","2019-11-10","2019-12-04","2019-10-12"],[null,null,null,"PRE-DOSE"],["2019-08-09T12:34:56Z","2019-11-10T23:59:59Z","2019-12-04T23:59:59Z","2019-10-12T00:00:00Z"],[null,"H","H","H"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>VSDTC<\/th>\n      <th>VSTPT<\/th>\n      <th>ADTM<\/th>\n      <th>ATMF<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"name":"VSDTC","targets":0},{"name":"VSTPT","targets":1},{"name":"ADTM","targets":2},{"name":"ATMF","targets":3}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ben Straub, Stefan Bundfuss, Jeffrey Dickinson, Ross Farrugia, Fanny Gautier, Dinakar Kulkarni, Edoardo Mancini, Sadchla Mascary, Gordon Miller, Jim Rothstein, Sophie Shapcott, Eric Simms, Daniel Sjoberg, Stefan Thoma, Phillip Webster, Zelos Zhu, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
